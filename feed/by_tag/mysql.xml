<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.1">Jekyll</generator><link href="https://blog.toshimaru.net/feed/by_tag/mysql.xml" rel="self" type="application/atom+xml" /><link href="https://blog.toshimaru.net/" rel="alternate" type="text/html" /><updated>2023-01-17T09:45:03+09:00</updated><id>https://blog.toshimaru.net/feed/by_tag/mysql.xml</id><title type="html">Hack Your Design!</title><subtitle>toshimaruã®æŠ€è¡“ç³»ãªãƒ–ãƒ­ã‚°</subtitle><author><name>Toshimaru</name></author><entry><title type="html">docker-compose ã§ Rails6 + MySQL ãªç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹</title><link href="https://blog.toshimaru.net/rails-on-docker-compose/" rel="alternate" type="text/html" title="docker-compose ã§ Rails6 + MySQL ãªç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹" /><published>2019-12-31T00:00:00+09:00</published><updated>2020-01-02T00:00:00+09:00</updated><id>https://blog.toshimaru.net/rails-on-docker-compose</id><content type="html" xml:base="https://blog.toshimaru.net/rails-on-docker-compose/"><![CDATA[<p>docker-compose ã‚’ä½¿ã£ã¦ Ruby 2.7 + Rails 6.0 + MySQL 8.0 ã®ç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<h2 id="ã‚´ãƒ¼ãƒ«">ã‚´ãƒ¼ãƒ«</h2>

<p>ã‚´ãƒ¼ãƒ«ã¯Railsã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ›ãƒ¼ãƒ ç”»é¢ã‚’è¡¨ç¤ºã•ã›ã‚‹ã¨ã“ã‚ã¾ã§ã§ã™ã€‚</p>

<h2 id="æ‰‹é †">æ‰‹é †</h2>

<p>ä¸‹è¨˜ã®æ‰‹é †ã‚’ãƒ™ãƒ¼ã‚¹ã«é€²ã‚ã¦ã„ãã¾ã™â€¥</p>

<p><a href="https://docs.docker.com/compose/rails/">Quickstart: Compose and Rails | Docker Documentation</a></p>

<h3 id="dockerfile">Dockerfile</h3>

<p>é©å½“ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç”¨æ„ã—ã¦ã€<code class="language-plaintext highlighter-rouge">Dockerfile</code>ã‚’ä¸‹è¨˜ã®é€šã‚Šç”¨æ„ã—ã¾ã™ã€‚</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> ruby:2.7</span>
<span class="k">RUN </span>apt-get update <span class="nt">-qq</span> <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> nodejs yarnpkg
<span class="k">RUN </span><span class="nb">ln</span> <span class="nt">-s</span> /usr/bin/yarnpkg /usr/bin/yarn
<span class="k">RUN </span><span class="nb">mkdir</span> /app
<span class="k">WORKDIR</span><span class="s"> /app</span>
<span class="k">COPY</span><span class="s"> Gemfile /app/Gemfile</span>
<span class="k">COPY</span><span class="s"> Gemfile.lock /app/Gemfile.lock</span>
<span class="k">RUN </span>bundle <span class="nb">install</span>
<span class="k">COPY</span><span class="s"> . /app</span>

<span class="c"># Add a script to be executed every time the container starts.</span>
<span class="k">COPY</span><span class="s"> entrypoint.sh /usr/bin/</span>
<span class="k">RUN </span><span class="nb">chmod</span> +x /usr/bin/entrypoint.sh
<span class="k">ENTRYPOINT</span><span class="s"> ["entrypoint.sh"]</span>
<span class="k">EXPOSE</span><span class="s"> 3000</span>

<span class="c"># Start the main process.</span>
<span class="k">CMD</span><span class="s"> ["rails", "server", "-b", "0.0.0.0"]</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">yarnpkg</code>ã§yarnã‚’å…¥ã‚Œã‚‹ã¨ã€yarn ã¨ã„ã†å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ãªã <code class="language-plaintext highlighter-rouge">yarnpkg</code> ã¨ã„ã†å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã«ãªã£ã¦ã—ã¾ã†ã®ã§ã€ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ä½œæˆã—ã¦ã„ã‚‹ç‚¹ã«ç•™æ„ã€‚</li>
</ul>

<h3 id="åˆæœŸgemfile">åˆæœŸGemfile</h3>

<p>ä¸‹è¨˜ã®é€šã‚Š<code class="language-plaintext highlighter-rouge">Gemfile</code>ã¨<code class="language-plaintext highlighter-rouge">Gemfile.lock</code>ã‚’ç”¨æ„ã—ã¾ã™ã€‚</p>

<div class="language-rb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">source</span> <span class="s1">'https://rubygems.org'</span>
<span class="n">gem</span> <span class="s1">'rails'</span><span class="p">,</span> <span class="s1">'~&gt;6'</span>
</code></pre></div></div>

<ul>
  <li>ä»Šå›ã¯ Rails v6 ï¼ˆç¾æ™‚ç‚¹ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰ã‚’ä½¿ã„ã¾ã™</li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">touch </span>Gemfile.lock
</code></pre></div></div>

<ul>
  <li>ç¾æ®µéšã§ã¯ <code class="language-plaintext highlighter-rouge">Gemfile.lock</code> ã¯ç©ºã§OK</li>
</ul>

<h3 id="entrypointsh">entrypoint.sh</h3>

<p><code class="language-plaintext highlighter-rouge">Dockerfile</code>ã§<code class="language-plaintext highlighter-rouge">ENTRYPOINT</code>ã¨ã—ã¦å®šç¾©ã—ã¦ã„ã‚‹ <code class="language-plaintext highlighter-rouge">entrypoint.sh</code> ã§ã™ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nb">set</span> <span class="nt">-e</span>

<span class="c"># Remove a potentially pre-existing server.pid for Rails.</span>
<span class="nb">rm</span> <span class="nt">-f</span> /app/tmp/pids/server.pid

<span class="c"># Then exec the container's main process (what's set as CMD in the Dockerfile).</span>
<span class="nb">exec</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span>
</code></pre></div></div>

<h3 id="docker-composeyml">docker-compose.yml</h3>

<p><code class="language-plaintext highlighter-rouge">docker-compose.yml</code>ã‚’ä¸‹è¨˜ã®é€šã‚Šç”¨æ„ã—ã¾ã™ã€‚</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">db</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mysql:8.0</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./tmp/db:/var/lib/mysql</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">MYSQL_ALLOW_EMPTY_PASSWORD=1</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">bash -c "rm -f tmp/pids/server.pid &amp;&amp; bundle exec rails s -p 3000 -b '0.0.0.0'"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">.:/app</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">3000:3000"</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">db</span>
</code></pre></div></div>

<ul>
  <li>MySQL ã¯ 8.0 ï¼ˆç¾æ™‚ç‚¹ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰ã‚’ä½¿ç”¨</li>
  <li><code class="language-plaintext highlighter-rouge">MYSQL_ALLOW_EMPTY_PASSWORD</code> ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ <code class="language-plaintext highlighter-rouge">password</code> ãŒç©ºã§ã‚‚rootã§æ¥ç¶šã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠã</li>
</ul>

<h3 id="rails-new">rails new</h3>

<p><code class="language-plaintext highlighter-rouge">rails new</code> ã®ã‚³ãƒãƒ³ãƒ‰ã‚’webã‚³ãƒ³ãƒ†ãƒŠä¸Šã§å®Ÿè¡Œã—ã¦Railsã®ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã‚’ç”Ÿæˆã—ã¾ã™ã€‚</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker-compose run web bundle <span class="nb">exec </span>rails new <span class="nb">.</span> <span class="nt">--force</span> <span class="nt">--database</span><span class="o">=</span>mysql
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">--force</code> ã§æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸Šæ›¸ã</li>
  <li>DBã¯mysqlã‚’æŒ‡å®š</li>
</ul>

<p>Railsã®ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ãŒ <code class="language-plaintext highlighter-rouge">rails new</code> ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã£ã¦å‡ºæ¥ä¸ŠãŒã£ãŸã®ã§ build ã—ã¾ã™ã€‚</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker-compose build
</code></pre></div></div>

<h3 id="dbãƒ›ã‚¹ãƒˆåå¤‰æ›´">DBãƒ›ã‚¹ãƒˆåå¤‰æ›´</h3>

<p>ã“ã®ã¾ã¾ã§ã¯DBã«æ¥ç¶šã§ãã¾ã›ã‚“ã€‚ãªãœãªã‚‰ã° host åã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚</p>

<p>ä¸‹è¨˜ã®é€šã‚Š <code class="language-plaintext highlighter-rouge">config/database.yml</code> ã®hostã®éƒ¨åˆ†ã‚’ <code class="language-plaintext highlighter-rouge">db</code> ã«ç½®ãæ›ãˆã¾ã—ã‚‡ã†ã€‚</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">default</span><span class="pi">:</span> <span class="nl">&amp;default</span>
  <span class="na">adapter</span><span class="pi">:</span> <span class="s">mysql2</span>
  <span class="na">encoding</span><span class="pi">:</span> <span class="s">utf8mb4</span>
  <span class="na">pool</span><span class="pi">:</span> <span class="s">&lt;%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %&gt;</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s">root</span>
  <span class="na">password</span><span class="pi">:</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">db</span>
<span class="na">development</span><span class="pi">:</span>
  <span class="na">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*default</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">app_development</span>
<span class="na">test</span><span class="pi">:</span>
  <span class="na">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*default</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">app_test</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">host</code> ã« <code class="language-plaintext highlighter-rouge">db</code> ã‚’è¨­å®š
    <ul>
      <li><code class="language-plaintext highlighter-rouge">db</code> ã¯ã‚³ãƒ³ãƒ†ãƒŠåã«ãªã‚Šã¾ã™</li>
    </ul>
  </li>
</ul>

<p>buildå¾Œã« docker-compose up ã—ã¾ã™ã€‚</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker-compose up
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">localhost:3000</code> ã§RailsãŒç«‹ã¡ä¸ŠãŒã‚‹ã®ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>

<h2 id="error-caching_sha2_password-could-not-be-loaded">Error: caching_sha2_password could not be loaded</h2>

<p>ã—ã‹ã—ã“ã“ã§Railsã«æ¥ç¶šã™ã‚‹ã¨ã€ä¸‹è¨˜ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ActiveRecord::NoDatabaseError

Plugin caching_sha2_password could not be loaded: /usr//usr/lib/x86_64-linux-gnu/mariadb19/plugin/caching_sha2_password.so: cannot open shared object file: No such file or directory
</code></pre></div></div>

<p>ã“ã‚Œã¯webã‚³ãƒ³ãƒ†ãƒŠãŒ mysql 8.0 ã®<code class="language-plaintext highlighter-rouge">caching_sha2_password</code>èªè¨¼æ–¹å¼ã«å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã§ã™ã€‚</p>

<p>ä¸‹è¨˜ã®æ‰‹é †ã§ <code class="language-plaintext highlighter-rouge">caching_sha2_password</code> ã‚’ <code class="language-plaintext highlighter-rouge">mysql_native_password</code>ï¼ˆæ—§æ¥ã®èªè¨¼æ–¹å¼ï¼‰ã«å¤‰æ›´ã—ã¾ã—ã‚‡ã†ã€‚</p>

<h3 id="dbã‚³ãƒ³ãƒ†ãƒŠã§mysqlã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆèµ·å‹•">DBã‚³ãƒ³ãƒ†ãƒŠã§mysqlã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆèµ·å‹•</h3>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker-compose <span class="nb">exec </span>db bash
</code></pre></div></div>

<p>dbã‚³ãƒ³ãƒ†ãƒŠã®bashã‚’èµ·å‹•å¾Œã«mysqlã‚³ãƒãƒ³ãƒ‰ã§æ¥ç¶šã—ã¾ã™ã€‚</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>mysql <span class="nt">-u</span> root
<span class="gp">Welcome to the MySQL monitor.  Commands end with ;</span><span class="w"> </span>or <span class="se">\g</span><span class="nb">.</span>
<span class="go">Your MySQL connection id is 9
Server version: 8.0.18 MySQL Community Server - GPL

</span><span class="c">...
</span></code></pre></div></div>

<h3 id="èªè¨¼æ–¹å¼å¤‰æ›´sql">èªè¨¼æ–¹å¼å¤‰æ›´SQL</h3>

<p>ä¸‹è¨˜ã®ã‚¯ã‚¨ãƒªã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã¨ãã®èªè¨¼æ–¹å¼ãŒé–²è¦§ã§ãã¾ã™ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql&gt; select User,Host,plugin from mysql.user;
+------------------+-----------+-----------------------+
| User             | Host      | plugin                |
+------------------+-----------+-----------------------+
| root             | %         | caching_sha2_password |
| mysql.infoschema | localhost | caching_sha2_password |
| mysql.session    | localhost | caching_sha2_password |
| mysql.sys        | localhost | caching_sha2_password |
| root             | localhost | caching_sha2_password |
+------------------+-----------+-----------------------+
5 rows in set (0.00 sec)
</code></pre></div></div>

<p>å…¨ã¦ <code class="language-plaintext highlighter-rouge">caching_sha2_password</code> ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’<code class="language-plaintext highlighter-rouge">mysql_native_password</code>ã«å¤‰æ›´ã—ã¾ã™ã€‚</p>

<p>ä»Šå›å¯¾è±¡ã¨ãªã‚‹ <code class="language-plaintext highlighter-rouge">root@%</code> ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã‚’ <code class="language-plaintext highlighter-rouge">ALTER USER</code> ã‚’ä½¿ã£ã¦å¤‰æ›´ã—ã¾ã—ã‚‡ã†ã€‚</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">USER</span> <span class="s1">'root'</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="k">WITH</span> <span class="n">mysql_native_password</span> <span class="k">BY</span> <span class="s1">''</span><span class="p">;</span>
<span class="c1">-- Query OK, 0 rows affected (0.02 sec)</span>
</code></pre></div></div>

<p>å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql&gt; select User,Host,plugin from mysql.user;
+------------------+-----------+-----------------------+
| User             | Host      | plugin                |
+------------------+-----------+-----------------------+
| root             | %         | mysql_native_password |
| mysql.infoschema | localhost | caching_sha2_password |
| mysql.session    | localhost | caching_sha2_password |
| mysql.sys        | localhost | caching_sha2_password |
| root             | localhost | caching_sha2_password |
+------------------+-----------+-----------------------+
5 rows in set (0.00 sec)
</code></pre></div></div>

<h2 id="yay-youre-on-rails">â€œYay! Youâ€™re on Rails!â€</h2>

<p>DBãŒä½œæˆã•ã‚Œã¦ã„ãªã„ã‚ˆã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã‚‹ã®ã§ <code class="language-plaintext highlighter-rouge">db:prepare</code> ã§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker-compose <span class="nb">exec </span>web bundle <span class="nb">exec </span>rails db:prepare
</code></pre></div></div>

<p>ã“ã‚Œã§Railsã®ãƒ›ãƒ¼ãƒ ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>

<p><img src="/images/posts/docker/railshome.png" alt="rails home" /></p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ul>
  <li>éå»ã«åŒã˜ã“ã¨ã‚’ã‚„ã£ãŸã¨ãã®ã‚¨ãƒ³ãƒˆãƒª: <a href="docker-compose-rails/">docker-compose ã§ Rails ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹</a></li>
</ul>]]></content><author><name>Toshimaru</name></author><category term="docker" /><category term="mysql" /><category term="rails" /><summary type="html"><![CDATA[docker-compose ã‚’ä½¿ã£ã¦ Ruby 2.7 + Rails 6.0 + MySQL 8.0 ã®ç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã‚´ãƒ¼ãƒ«ã¯Railsã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ›ãƒ¼ãƒ ç”»é¢ã‚’è¡¨ç¤ºã•ã›ã‚‹ã¨ã“ã‚ã¾ã§ã§ã™ã€‚]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blog.toshimaru.net/images/posts/docker/yaml.png" /><media:content medium="image" url="https://blog.toshimaru.net/images/posts/docker/yaml.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">[MySQL]æ—¥ä»˜ãŒæ­¯æŠœã‘ã®ãƒ‡ãƒ¼ã‚¿ã‚’çµåˆã—ã¦æ—¥ä»˜æ¯ã«æ•´ç†ã•ã‚ŒãŸãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œã‚‹</title><link href="https://blog.toshimaru.net/join-with-date-virtual-table/" rel="alternate" type="text/html" title="[MySQL]æ—¥ä»˜ãŒæ­¯æŠœã‘ã®ãƒ‡ãƒ¼ã‚¿ã‚’çµåˆã—ã¦æ—¥ä»˜æ¯ã«æ•´ç†ã•ã‚ŒãŸãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œã‚‹" /><published>2018-10-07T00:00:00+09:00</published><updated>2018-10-07T00:00:00+09:00</updated><id>https://blog.toshimaru.net/join-with-date-virtual-table</id><content type="html" xml:base="https://blog.toshimaru.net/join-with-date-virtual-table/"><![CDATA[<h2 id="ã‚„ã‚ŠãŸã„ã“ã¨">ã‚„ã‚ŠãŸã„ã“ã¨</h2>

<p>ä¸‹è¨˜ã®æ—¥ä»˜ãŒæ­¯æŠœã‘ã«ãªã£ã¦ã„ã‚‹2ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«1, ãƒ†ãƒ¼ãƒ–ãƒ«2ï¼‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ—¥ä»˜æ¯ã«æ•´ç†ã—ã¦ãƒ†ãƒ¼ãƒ–ãƒ«3ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ãŸã„ã€‚</p>

<p><strong>ãƒ†ãƒ¼ãƒ–ãƒ«1</strong></p>

<table>
  <thead>
    <tr>
      <th>æ—¥ä»˜</th>
      <th>å•†å“è²©å£²æ•°</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2018-01-02</td>
      <td>10</td>
    </tr>
    <tr>
      <td>2018-01-04</td>
      <td>8</td>
    </tr>
    <tr>
      <td>2018-01-05</td>
      <td>3</td>
    </tr>
    <tr>
      <td>2018-01-07</td>
      <td>4</td>
    </tr>
    <tr>
      <td>2018-01-08</td>
      <td>5</td>
    </tr>
    <tr>
      <td>2018-01-10</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<p><strong>ãƒ†ãƒ¼ãƒ–ãƒ«2</strong></p>

<table>
  <thead>
    <tr>
      <th>æ—¥ä»˜</th>
      <th>å•†å“å…¥è·æ•°</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2018-01-03</td>
      <td>20</td>
    </tr>
    <tr>
      <td>2018-01-05</td>
      <td>30</td>
    </tr>
    <tr>
      <td>2018-01-10</td>
      <td>10</td>
    </tr>
  </tbody>
</table>

<p><strong>ãƒ†ãƒ¼ãƒ–ãƒ«3</strong></p>

<table>
  <thead>
    <tr>
      <th>æ—¥ä»˜</th>
      <th>å•†å“å…¥è·æ•°</th>
      <th>å•†å“è²©å£²æ•°</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2018-01-01</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>2018-01-02</td>
      <td>0</td>
      <td>10</td>
    </tr>
    <tr>
      <td>2018-01-03</td>
      <td>20</td>
      <td>0</td>
    </tr>
    <tr>
      <td>2018-01-04</td>
      <td>0</td>
      <td>8</td>
    </tr>
    <tr>
      <td>2018-01-05</td>
      <td>30</td>
      <td>3</td>
    </tr>
    <tr>
      <td>2018-01-06</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>2018-01-07</td>
      <td>0</td>
      <td>4</td>
    </tr>
    <tr>
      <td>2018-01-08</td>
      <td>0</td>
      <td>5</td>
    </tr>
    <tr>
      <td>2018-01-09</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>2018-01-10</td>
      <td>10</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<h2 id="å‰æç’°å¢ƒ">å‰æç’°å¢ƒ</h2>

<ul>
  <li>MySQL 5.7</li>
</ul>

<h2 id="æ–¹æ³•">æ–¹æ³•</h2>

<p>ä»¥å‰ç´¹ä»‹ã—ãŸé€£ç•ªã®ä»®æƒ³è¡¨ã‚’ä½œã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’é§†ä½¿ã™ã‚Œã°ã‚„ã‚ŠãŸã„ã“ã¨ãŒå®Ÿç¾å¯èƒ½ã§ã™ã€‚</p>

<p><a href="/mysql-virtual-table/">MySQLã§é€£ç•ªã®ä»®æƒ³è¡¨ã‚’ä½œã‚‹</a></p>

<h3 id="æ—¥ä»˜ã ã‘ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œã‚‹">æ—¥ä»˜ã ã‘ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œã‚‹</h3>

<p>å¯¾è±¡æœŸé–“ã€ã¤ã¾ã‚Š2018å¹´1æœˆ1æ—¥ã€œ2018å¹´1æœˆ10æ—¥ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ã¾ã™ã€‚</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="s1">'2018-01-01'</span> <span class="o">+</span> <span class="n">INTERVAL</span> <span class="n">seq_no</span> <span class="k">DAY</span> <span class="k">AS</span> <span class="nb">date</span>
<span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">@</span><span class="n">seq_no</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span> <span class="k">AS</span> <span class="n">seq_no</span>
      <span class="k">UNION</span>
      <span class="k">SELECT</span> <span class="o">@</span><span class="n">seq_no</span> <span class="p">:</span><span class="o">=</span> <span class="o">@</span><span class="n">seq_no</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">AS</span> <span class="n">seq_no</span> <span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">COLUMNS</span>
      <span class="k">LIMIT</span> <span class="mi">10</span><span class="p">)</span> <span class="n">tmp</span><span class="p">;</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2018-01-01</td>
    </tr>
    <tr>
      <td>2018-01-02</td>
    </tr>
    <tr>
      <td>2018-01-03</td>
    </tr>
    <tr>
      <td>2018-01-04</td>
    </tr>
    <tr>
      <td>2018-01-05</td>
    </tr>
    <tr>
      <td>2018-01-06</td>
    </tr>
    <tr>
      <td>2018-01-07</td>
    </tr>
    <tr>
      <td>2018-01-08</td>
    </tr>
    <tr>
      <td>2018-01-09</td>
    </tr>
    <tr>
      <td>2018-01-10</td>
    </tr>
  </tbody>
</table>

<h3 id="æ—¥ä»˜ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’joinã™ã‚‹">æ—¥ä»˜ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’JOINã™ã‚‹</h3>

<p>ä¸Šè¨˜ã®æ—¥ä»˜ãƒ†ãƒ¼ãƒ–ãƒ«ã«å®Ÿãƒ‡ãƒ¼ã‚¿ã‚’JOINã—ã¦ã‚„ã‚Œã°ã†ã¾ããƒ‡ãƒ¼ã‚¿ãŒç”Ÿæˆã§ãã¾ã™ã€‚</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span>
    <span class="n">date_table</span><span class="p">.</span><span class="nb">date</span> <span class="k">AS</span> <span class="s1">'æ—¥ä»˜'</span><span class="p">,</span>
    <span class="n">IFNULL</span><span class="p">(</span><span class="n">table2</span><span class="p">.</span><span class="err">å•†å“å…¥è·æ•°</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">AS</span> <span class="s1">'å…¥è·æ•°'</span><span class="p">,</span>
    <span class="n">IFNULL</span><span class="p">(</span><span class="n">table1</span><span class="p">.</span><span class="err">å•†å“è²©å£²æ•°</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">AS</span> <span class="s1">'è²©å£²æ•°'</span>
<span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="s1">'2018-01-01'</span> <span class="o">+</span> <span class="n">INTERVAL</span> <span class="n">seq_no</span> <span class="k">DAY</span> <span class="k">AS</span> <span class="nb">date</span>
      <span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">@</span><span class="n">seq_no</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span> <span class="k">AS</span> <span class="n">seq_no</span>
            <span class="k">UNION</span>
            <span class="k">SELECT</span> <span class="o">@</span><span class="n">seq_no</span> <span class="p">:</span><span class="o">=</span> <span class="o">@</span><span class="n">seq_no</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">AS</span> <span class="n">seq_no</span> <span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">COLUMNS</span>
            <span class="k">LIMIT</span> <span class="mi">10</span><span class="p">)</span> <span class="n">tmp</span><span class="p">)</span> <span class="n">date_table</span>
<span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">table1</span> <span class="k">ON</span> <span class="n">table1</span><span class="p">.</span><span class="err">æ—¥ä»˜</span> <span class="o">=</span> <span class="n">date_table</span><span class="p">.</span><span class="nb">date</span>
<span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">table2</span> <span class="k">ON</span> <span class="n">table2</span><span class="p">.</span><span class="err">æ—¥ä»˜</span> <span class="o">=</span> <span class="n">date_table</span><span class="p">.</span><span class="nb">date</span>
</code></pre></div></div>

<p>ã“ã‚Œã§ç„¡äº‹ã€å¾—ãŸã‹ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p>

<table>
  <thead>
    <tr>
      <th>æ—¥ä»˜</th>
      <th>å…¥è·æ•°</th>
      <th>è²©å£²æ•°</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2018-01-01</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>2018-01-02</td>
      <td>0</td>
      <td>10</td>
    </tr>
    <tr>
      <td>2018-01-03</td>
      <td>20</td>
      <td>0</td>
    </tr>
    <tr>
      <td>2018-01-04</td>
      <td>0</td>
      <td>8</td>
    </tr>
    <tr>
      <td>2018-01-05</td>
      <td>30</td>
      <td>3</td>
    </tr>
    <tr>
      <td>2018-01-06</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>2018-01-07</td>
      <td>0</td>
      <td>4</td>
    </tr>
    <tr>
      <td>2018-01-08</td>
      <td>0</td>
      <td>5</td>
    </tr>
    <tr>
      <td>2018-01-09</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>2018-01-10</td>
      <td>10</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<h2 id="åˆ©ç”¨ã‚·ãƒ¼ãƒ³">åˆ©ç”¨ã‚·ãƒ¼ãƒ³</h2>

<p>æ—¥ä»˜æ¯ã«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚°ãƒ©ãƒ•ã«ãƒ—ãƒ­ãƒƒãƒˆã—ã¦å¯è¦–åŒ–ã—ãŸã„ã¨ãã«ã“ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ä½¿ã†ã¨ä¾¿åˆ©ã€‚</p>]]></content><author><name>Toshimaru</name></author><category term="mysql" /><summary type="html"><![CDATA[ä¸‹è¨˜ã®æ—¥ä»˜ãŒæ­¯æŠœã‘ã«ãªã£ã¦ã„ã‚‹2ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«1, ãƒ†ãƒ¼ãƒ–ãƒ«2ï¼‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ—¥ä»˜æ¯ã«æ•´ç†ã—ã¦ãƒ†ãƒ¼ãƒ–ãƒ«3ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ãŸã„ã€‚ ãƒ†ãƒ¼ãƒ–ãƒ«1 ãƒ†ãƒ¼ãƒ–ãƒ«2 ãƒ†ãƒ¼ãƒ–ãƒ«3 ä»¥å‰ç´¹ä»‹ã—ãŸé€£ç•ªã®ä»®æƒ³è¡¨ã‚’ä½œã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’é§†ä½¿ã™ã‚Œã°ã‚„ã‚ŠãŸã„ã“ã¨ãŒå®Ÿç¾å¯èƒ½ã§ã™ã€‚]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blog.toshimaru.net/images/posts/sql1.png" /><media:content medium="image" url="https://blog.toshimaru.net/images/posts/sql1.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">MySQLã§é€£ç•ªã®ä»®æƒ³è¡¨ã‚’ä½œã‚‹</title><link href="https://blog.toshimaru.net/mysql-virtual-table/" rel="alternate" type="text/html" title="MySQLã§é€£ç•ªã®ä»®æƒ³è¡¨ã‚’ä½œã‚‹" /><published>2018-09-25T00:00:00+09:00</published><updated>2018-09-25T00:00:00+09:00</updated><id>https://blog.toshimaru.net/mysql-virtual-table</id><content type="html" xml:base="https://blog.toshimaru.net/mysql-virtual-table/"><![CDATA[<h2 id="ã‚„ã‚ŠãŸã„ã“ã¨">ã‚„ã‚ŠãŸã„ã“ã¨</h2>

<p>MySQLã§å®Ÿãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‚ç…§ã›ãšã«é€£ç•ªã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ãŸã„ã€‚</p>

<h2 id="å‰æç’°å¢ƒ">å‰æç’°å¢ƒ</h2>

<ul>
  <li>MySQL 5.7</li>
</ul>

<h2 id="æ–¹æ³•">æ–¹æ³•</h2>

<p>ä¸‹è¨˜ã®ã‚ˆã†ãªSQLã§ã‚„ã‚ŠãŸã„ã“ã¨ãŒå®Ÿç¾ã§ãã¾ã™ã€‚</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">@</span><span class="n">seq_no</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span> <span class="k">AS</span> <span class="n">seq_no</span>
<span class="k">UNION</span>
<span class="k">SELECT</span> <span class="o">@</span><span class="n">seq_no</span> <span class="p">:</span><span class="o">=</span> <span class="o">@</span><span class="n">seq_no</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">AS</span> <span class="n">seq_no</span>
<span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">COLUMNS</span>
<span class="k">LIMIT</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div></div>

<p>ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã¯ä¸‹è¨˜ã®é€šã‚Šã€‚</p>

<ul>
  <li>å…¨ä½“ã®æ§‹æˆã¨ã—ã¦ã¯ã€2ã¤ã®<code class="language-plaintext highlighter-rouge">SELECT</code>æ–‡ã‚’<code class="language-plaintext highlighter-rouge">UNION</code>ã‚’ä½¿ã£ã¦çµåˆã—ã¦ã„ã‚‹ã¨ã„ã†ã‚‚ã®</li>
  <li><code class="language-plaintext highlighter-rouge">@seq_no</code>ã¨ã„ã†å¤‰æ•°ã‚’ç”¨æ„</li>
  <li>ï¼‘ã¤ç›®ã®<code class="language-plaintext highlighter-rouge">SELECT</code>æ–‡ã§å¤‰æ•°ã‚’åˆæœŸåŒ–ã™ã‚‹</li>
  <li>ï¼’ã¤ç›®ã®<code class="language-plaintext highlighter-rouge">SELECT</code>æ–‡ã§åˆæœŸåŒ–ã—ãŸå¤‰æ•°ã®ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã®å‡¦ç†ã‚’è¡Œã†
    <ul>
      <li>ãã®éš›ã«ãƒ‡ãƒ¼ã‚¿ä»¶æ•°ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«ã€MySQLã§æœ€åˆã«ç”¨æ„ã•ã‚Œã¦ã„ã‚‹<code class="language-plaintext highlighter-rouge">information_schema.COLUMNS</code>ã‚’å‚ç…§ã™ã‚‹ï¼ˆä¸­èº«ã®ãƒ‡ãƒ¼ã‚¿ã¯å®Ÿéš›ã«ã¯ä½¿ã‚ãªã„ï¼‰</li>
      <li><code class="language-plaintext highlighter-rouge">LIMIT</code>ã§å–å¾—ã—ãŸã„ãƒ‡ãƒ¼ã‚¿ä»¶æ•°ã‚’æŒ‡å®šã™ã‚‹</li>
    </ul>
  </li>
</ul>

<p>ã“ã®SQLã§å¾—ã‚‰ã‚Œã‚‹çµæœã¯ä¸‹è¨˜ã®é€šã‚Šã€‚</p>

<table>
  <thead>
    <tr>
      <th>seq_no</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
    </tr>
    <tr>
      <td>2</td>
    </tr>
    <tr>
      <td>3</td>
    </tr>
    <tr>
      <td>4</td>
    </tr>
    <tr>
      <td>5</td>
    </tr>
    <tr>
      <td>6</td>
    </tr>
    <tr>
      <td>7</td>
    </tr>
    <tr>
      <td>8</td>
    </tr>
    <tr>
      <td>9</td>
    </tr>
    <tr>
      <td>10</td>
    </tr>
  </tbody>
</table>

<p>ã“ã‚Œã§1ã‹ã‚‰10ã¾ã§ã®é€£ç•ªã®ãƒ‡ãƒ¼ã‚¿ã‚’SQLã ã‘ã§å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p>

<h2 id="å¿œç”¨ç·¨">å¿œç”¨ç·¨</h2>

<p>ä¸Šè¨˜ã§ç´¹ä»‹ã—ãŸãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ä½¿ãˆã°ã„ã‚ã„ã‚ãªã“ã¨ãŒSQLã§å®Ÿç¾ã§ãã¾ã™ã€‚</p>

<h3 id="0ã‹ã‚‰ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ">0ã‹ã‚‰ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ</h3>

<p>ã¾ãšã¯ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã®é€†ã€ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã€‚</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">@</span><span class="n">seq_no</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span> <span class="k">AS</span> <span class="n">seq_no</span>
<span class="k">UNION</span>
<span class="k">SELECT</span> <span class="o">@</span><span class="n">seq_no</span> <span class="p">:</span><span class="o">=</span> <span class="o">@</span><span class="n">seq_no</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">AS</span> <span class="n">seq_no</span>
<span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">COLUMNS</span>
<span class="k">LIMIT</span> <span class="mi">5</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>çµæœ</strong></p>

<table>
  <thead>
    <tr>
      <th>seq_no</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
    </tr>
    <tr>
      <td>-1</td>
    </tr>
    <tr>
      <td>-2</td>
    </tr>
    <tr>
      <td>-3</td>
    </tr>
    <tr>
      <td>-4</td>
    </tr>
  </tbody>
</table>

<h3 id="å€¤ã‚’å€åŠ ã•ã›ã‚‹">å€¤ã‚’å€åŠ ã•ã›ã‚‹</h3>

<p>å€¤ã‚’å€ã€…ã«ã—ã¦ã„ã£ã¦ã¿ã¾ã™ã€‚</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">@</span><span class="n">seq_no</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span> <span class="k">AS</span> <span class="n">seq_no</span>
<span class="k">UNION</span>
<span class="k">SELECT</span> <span class="o">@</span><span class="n">seq_no</span> <span class="p">:</span><span class="o">=</span> <span class="o">@</span><span class="n">seq_no</span> <span class="o">*</span> <span class="mi">2</span> <span class="k">AS</span> <span class="n">seq_no</span>
<span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">COLLATIONS</span>
<span class="k">LIMIT</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">information_schema.COLUMNS</code> ã‚’ä½¿ã†ã¨<code class="language-plaintext highlighter-rouge">seq_no</code>å€¤ãŒå¤§ãããªã‚Šã™ãã¦ã—ã¾ã„<code class="language-plaintext highlighter-rouge">DOUBLE value is out of range</code>ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã®ã§<code class="language-plaintext highlighter-rouge">information_schema.COLLATIONS</code>ã‚’ä½¿ç”¨</li>
</ul>

<p><strong>çµæœ</strong></p>

<table>
  <thead>
    <tr>
      <th>seq_no</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
    </tr>
    <tr>
      <td>2</td>
    </tr>
    <tr>
      <td>4</td>
    </tr>
    <tr>
      <td>8</td>
    </tr>
    <tr>
      <td>16</td>
    </tr>
    <tr>
      <td>32</td>
    </tr>
    <tr>
      <td>64</td>
    </tr>
    <tr>
      <td>128</td>
    </tr>
    <tr>
      <td>256</td>
    </tr>
    <tr>
      <td>512</td>
    </tr>
  </tbody>
</table>

<h3 id="ç›´è¿‘30æ—¥é–“ã®æ—¥ä»˜ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—">ç›´è¿‘30æ—¥é–“ã®æ—¥ä»˜ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—</h3>

<p>ç›´è¿‘30æ—¥é–“ã®æ—¥ä»˜ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã¦ã¿ã‚‹ã€‚</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">CURDATE</span><span class="p">()</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="n">seq_no</span> <span class="k">DAY</span> <span class="k">AS</span> <span class="nb">date</span>
<span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">@</span><span class="n">seq_no</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span> <span class="k">AS</span> <span class="n">seq_no</span>
      <span class="k">UNION</span>
      <span class="k">SELECT</span> <span class="o">@</span><span class="n">seq_no</span> <span class="p">:</span><span class="o">=</span> <span class="o">@</span><span class="n">seq_no</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">AS</span> <span class="n">seq_no</span> <span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">COLUMNS</span>
      <span class="k">LIMIT</span> <span class="mi">30</span><span class="p">)</span> <span class="n">tmp</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>çµæœ</strong></p>

<table>
  <thead>
    <tr>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2018-09-24</td>
    </tr>
    <tr>
      <td>2018-09-23</td>
    </tr>
    <tr>
      <td>2018-09-22</td>
    </tr>
    <tr>
      <td>2018-09-21</td>
    </tr>
    <tr>
      <td>ï¼ˆâ€¦çœç•¥â€¦ï¼‰</td>
    </tr>
    <tr>
      <td>2018-08-27</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>åŸ·ç­†æ™‚ç‚¹ã®ä»Šæ—¥ã®æ—¥ä»˜ã¯<code class="language-plaintext highlighter-rouge">2018-09-25</code></li>
  <li><code class="language-plaintext highlighter-rouge">CURDATE()</code>ã‹ã‚‰<code class="language-plaintext highlighter-rouge">seq_no</code>æ—¥åˆ†ã‚’å¼•ãç®—ã—ã¦æ—¥ä»˜ã‚’å‡ºåŠ›</li>
</ul>

<h2 id="æ³¨æ„ç‚¹">æ³¨æ„ç‚¹</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">information_schema.COLUMNS</code>ã‚’ä½¿ã£ãŸå ´åˆã€<code class="language-plaintext highlighter-rouge">LIMIT</code>ã§æŒ‡å®šã§ãã‚‹å€¤ã¯<code class="language-plaintext highlighter-rouge">information_schema.COLUMNS</code>ã®MAXå€¤ã¾ã§ã¨ã„ã†æˆç´„ãŒã‚ã‚‹</li>
  <li>MySQL7ã‹ã‚‰å°å…¥ã•ã‚ŒãŸ<a href="https://dev.mysql.com/doc/refman/8.0/en/with.html">WITH syntax</a>ã§CTEã™ã‚Œã°ã‚‚ã£ã¨ã‚·ãƒ³ãƒ—ãƒ«ã«ã‚¯ã‚¨ãƒªãŒæ›¸ã‘ãã†</li>
</ul>]]></content><author><name>Toshimaru</name></author><category term="mysql" /><summary type="html"><![CDATA[MySQLã§å®Ÿãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‚ç…§ã›ãšã«é€£ç•ªã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ãŸã„ã€‚ å‰æç’°å¢ƒ MySQL 5.7 æ–¹æ³• ä¸‹è¨˜ã®ã‚ˆã†ãªSQLã§ã‚„ã‚ŠãŸã„ã“ã¨ãŒå®Ÿç¾ã§ãã¾ã™ã€‚]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blog.toshimaru.net/images/posts/virtual-table-og.jpg" /><media:content medium="image" url="https://blog.toshimaru.net/images/posts/virtual-table-og.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Rails ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã‚’è¨­å®šã™ã‚‹æ–¹æ³•</title><link href="https://blog.toshimaru.net/rails-4-transaction-isolation/" rel="alternate" type="text/html" title="Rails ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã‚’è¨­å®šã™ã‚‹æ–¹æ³•" /><published>2015-01-19T00:00:00+09:00</published><updated>2019-09-21T00:00:00+09:00</updated><id>https://blog.toshimaru.net/rails-4-transaction-isolation</id><content type="html" xml:base="https://blog.toshimaru.net/rails-4-transaction-isolation/"><![CDATA[<div class="info">
  <h5>è¿½è¨˜</h5>
  <p>Rails5, Rails6 å‘ã‘ã«è¨˜äº‹ã®å†…å®¹ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¾ã—ãŸï¼ˆ2019/09/21ï¼‰</p>
</div>

<h2 id="mysqlã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«">MySQLã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«</h2>

<p>çªç„¶ã§ã™ãŒå•é¡Œã§ã™ã€‚MySQLã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>

<blockquote>
  <p><strong>REPEATABLE READ</strong></p>

  <p>This is the default isolation level for InnoDB.</p>
</blockquote>

<p>via. <a href="https://dev.mysql.com/doc/refman/8.0/en/innodb-transaction-isolation-levels.html#isolevel_repeatable-read">MySQL :: MySQL 8.0 Reference Manual :: 15.7.2.1 Transaction Isolation Levels</a></p>

<p>ãƒã‚¤ã€ç­”ãˆã¯ã€Œ<strong>REPEATABLE READ</strong>ã€ã§ã™ãƒã€‚</p>

<h2 id="railsã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã‚’è¨­å®š">Railsã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã‚’è¨­å®š</h2>

<p>ç¶šã„ã¦ã®å•é¡Œã§ã™ã€‚Railsã«ãŠã„ã¦ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã‚’è¨­å®šã™ã‚‹ã«ã¯ã©ã†ã—ãŸã‚‰ã‚ˆã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ å®Ÿã¯ Rails 3 ã¨ Rails 4 ã¨ Rails 5 ä»¥é™ã§ã¯ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã®è¨­å®šæ–¹æ³•ã¯ãã‚Œãã‚Œç•°ãªã£ã¦ã„ã¾ã™ã€‚</p>

<h3 id="rails-3">Rails 3</h3>

<p>Rails 3ã®æ™‚ä»£ã§ã¯ <code class="language-plaintext highlighter-rouge">execute</code> ã§ç›´æ¥ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚</p>

<div class="language-rb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">connection</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="s1">'SET TRANSACTION ISOLATION LEVEL READ COMMITTED'</span><span class="p">)</span>
<span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">transaction</span> <span class="k">do</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="rails-4x">Rails 4.x</h3>

<p>Rails 4ã‹ã‚‰ã¯<code class="language-plaintext highlighter-rouge">transaction</code>ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã‚’è¨­å®šå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚</p>

<div class="language-rb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">transaction</span><span class="p">(</span><span class="ss">isolation: :read_committed</span><span class="p">)</span> <span class="k">do</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="rails-5-ä»¥é™">Rails 5 ä»¥é™</h3>

<p>Rails 5ã‹ã‚‰ã¯ <code class="language-plaintext highlighter-rouge">ActiveRecord::Base</code> ã®ä»£ã‚ã‚Šã« <code class="language-plaintext highlighter-rouge">ApplicationRecord</code> ãŒä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p>

<blockquote>
  <p>ApplicationRecord is a new superclass for all app models</p>
</blockquote>

<p>via. <a href="https://edgeguides.rubyonrails.org/5_0_release_notes.html">Ruby on Rails 5.0 Release Notes â€” Ruby on Rails Guides</a></p>

<div class="language-rb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">ApplicationRecord</span><span class="p">.</span><span class="nf">transaction</span><span class="p">(</span><span class="ss">isolation: :read_committed</span><span class="p">)</span> <span class="k">do</span> 
  <span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">lock</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="n">user</span><span class="p">.</span><span class="nf">update!</span> <span class="ss">name: </span><span class="s2">"TEST"</span>
<span class="k">end</span>
</code></pre></div></div>

<p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ pry ã§å®Ÿè¡Œã—ãŸéš›ã«æµã‚Œã‚‹ã‚¯ã‚¨ãƒªã¯ä¸‹è¨˜ã®é€šã‚Šã§ã™ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   (0.5ms)  SET TRANSACTION ISOLATION LEVEL READ COMMITTED
   (0.3ms)  BEGIN
  User Load (0.9ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1 FOR UPDATE
  User Update (0.4ms)  UPDATE `users` SET `name` = 'TEST', `updated_at` = '2019-09-20 16:34:31' WHERE `users`.`id` = 1
   (1.5ms)  COMMIT
=&gt; true
</code></pre></div></div>

<h2 id="æœ‰åŠ¹ãªãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«">æœ‰åŠ¹ãªãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«</h2>

<p>Railsã§è¨­å®šå¯èƒ½ã‹ã¤æœ‰åŠ¹ãª<code class="language-plaintext highlighter-rouge">isolation</code>ãƒ¬ãƒ™ãƒ«ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿã€€ç­”ãˆã¯ä¸‹è¨˜ï¼”ã¤ã«ãªã‚Šã¾ã™ã€‚</p>

<blockquote>
  <p>Valid isolation levels are:</p>

  <ul>
    <li><code class="language-plaintext highlighter-rouge">:read_uncommitted</code></li>
    <li><code class="language-plaintext highlighter-rouge">:read_committed</code></li>
    <li><code class="language-plaintext highlighter-rouge">:repeatable_read</code></li>
    <li><code class="language-plaintext highlighter-rouge">:serializable</code></li>
  </ul>
</blockquote>

<p>via. <a href="https://railsdoc.github.io/classes/ActiveRecord/ConnectionAdapters/DatabaseStatements.html#method-i-transaction-label-Transaction+isolation">ActiveRecord::ConnectionAdapters::DatabaseStatements | RailsDoc</a></p>

<h2 id="åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã¨ãƒ€ãƒ¼ãƒ†ã‚£ãƒªãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¸ãƒ¼ãƒªãƒ¼ãƒ‰ãƒ•ã‚¡ãƒ³ãƒˆãƒ ãƒªãƒ¼ãƒ‰ã®é–¢ä¿‚">åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã¨ãƒ€ãƒ¼ãƒ†ã‚£ãƒªãƒ¼ãƒ‰ã€ãƒ•ã‚¡ã‚¸ãƒ¼ãƒªãƒ¼ãƒ‰ã€ãƒ•ã‚¡ãƒ³ãƒˆãƒ ãƒªãƒ¼ãƒ‰ã®é–¢ä¿‚</h2>

<p>åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã¨ãƒ€ãƒ¼ãƒ†ã‚£ãƒªãƒ¼ãƒ‰ã€ãƒ•ã‚¡ã‚¸ãƒ¼ãƒªãƒ¼ãƒ‰ã€ãƒ•ã‚¡ãƒ³ãƒˆãƒ ãƒªãƒ¼ãƒ‰ãã‚Œãã‚Œã®é–¢ä¿‚æ€§ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚</p>

<table>
  <thead>
    <tr>
      <th>ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«</th>
      <th>ãƒ€ãƒ¼ãƒ†ã‚£ãƒªãƒ¼ãƒ‰</th>
      <th>ãƒ•ã‚¡ã‚¸ãƒ¼ãƒªãƒ¼ãƒ‰</th>
      <th>ãƒ•ã‚¡ãƒ³ãƒˆãƒ ãƒªãƒ¼ãƒ‰</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>READ UNCOMMITTED</strong></td>
      <td>ğŸ’€ç™ºç”Ÿã™ã‚‹</td>
      <td>ğŸ’€ç™ºç”Ÿã™ã‚‹</td>
      <td>ğŸ’€ç™ºç”Ÿã™ã‚‹</td>
    </tr>
    <tr>
      <td><strong>READ COMMITTED</strong></td>
      <td>ç™ºç”Ÿã—ãªã„</td>
      <td>ğŸ’€ç™ºç”Ÿã™ã‚‹</td>
      <td>ğŸ’€ç™ºç”Ÿã™ã‚‹</td>
    </tr>
    <tr>
      <td><strong>REPEATABLE READ</strong></td>
      <td>ç™ºç”Ÿã—ãªã„</td>
      <td>ç™ºç”Ÿã—ãªã„</td>
      <td>ğŸ’€ç™ºç”Ÿã™ã‚‹</td>
    </tr>
    <tr>
      <td><strong>SERIALIZABLE</strong></td>
      <td>ç™ºç”Ÿã—ãªã„</td>
      <td>ç™ºç”Ÿã—ãªã„</td>
      <td>ç™ºç”Ÿã—ãªã„</td>
    </tr>
  </tbody>
</table>

<p>via. <a href="https://qiita.com/PruneMazui/items/4135fcf7621869726b4b">[RDBMS][SQL]ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã«ã¤ã„ã¦æ¥µåŠ›åˆ†ã‹ã‚Šã‚„ã™ãè§£èª¬ - Qiita</a></p>

<h2 id="æœ€å¾Œã«">æœ€å¾Œã«</h2>

<p>é©åˆ‡ãªãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã§é©åˆ‡ãªãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å‡¦ç†ã‚’ã—ã¾ã—ã‚‡ã†ï¼</p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ul>
  <li><a href="https://tkrd.hatenadiary.org/entry/20131121/1385044179">Rails &amp; MySQL: ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«è¨­å®šã™ã‚‹</a></li>
  <li><a href="https://railsdoc.github.io/classes/ActiveRecord/ConnectionAdapters/DatabaseStatements.html#method-i-transaction-label-Transaction+isolation">ActiveRecord::ConnectionAdapters::DatabaseStatements | RailsDoc</a></li>
  <li><a href="https://qiita.com/PruneMazui/items/4135fcf7621869726b4b">[RDBMS][SQL]ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã«ã¤ã„ã¦æ¥µåŠ›åˆ†ã‹ã‚Šã‚„ã™ãè§£èª¬ - Qiita</a></li>
</ul>]]></content><author><name>Toshimaru</name></author><category term="rails" /><category term="activerecord" /><category term="mysql" /><summary type="html"><![CDATA[çªç„¶ã§ã™ãŒå•é¡Œã§ã™ã€‚MySQLã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿã€€ç¶šã„ã¦ã®å•é¡Œã§ã™ã€‚Railsã«ãŠã„ã¦ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã‚’è¨­å®šã™ã‚‹ã«ã¯ã©ã†ã—ãŸã‚‰ã‚ˆã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ å®Ÿã¯ Rails 3 ã¨ Rails 4 ã¨ Rails 5 ä»¥é™ã§ã¯ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã®è¨­å®šæ–¹æ³•ã¯ãã‚Œãã‚Œç•°ãªã£ã¦ã„ã¾ã™ã€‚]]></summary></entry><entry><title type="html">MySQL ã§ã®æ—¥ä»˜ã®ç¯„å›²æŒ‡å®š</title><link href="https://blog.toshimaru.net/mysql/" rel="alternate" type="text/html" title="MySQL ã§ã®æ—¥ä»˜ã®ç¯„å›²æŒ‡å®š" /><published>2011-11-08T00:00:00+09:00</published><updated>2011-11-08T00:00:00+09:00</updated><id>https://blog.toshimaru.net/mysql</id><content type="html" xml:base="https://blog.toshimaru.net/mysql/"><![CDATA[<p>MySQL ã§ã®æ—¥ä»˜ã®ç¯„å›²æŒ‡å®šã¯ã€ <code class="language-plaintext highlighter-rouge">between</code> ã‚’ä½¿ã†ã®ãŒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚‚åŠ¹ã„ã¦GOODãªæ„Ÿã˜.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">items</span>
<span class="k">where</span> 
    <span class="n">created_at</span> <span class="k">between</span> <span class="s1">'2010-01-01'</span> <span class="k">and</span> <span class="s1">'2010-01-01'</span> <span class="o">+</span> <span class="n">interval</span> <span class="mi">30</span> <span class="k">day</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="å‚è€ƒ">å‚è€ƒ</h3>

<ul>
  <li><a href="http://sj6.org/mysql_datetime_index_faster/">datetimeå‹ã®ã‚«ãƒ©ãƒ ã‹ã‚‰æ—¥ä»˜ãƒ‡ãƒ¼ã‚¿ã‚’å¼•ã£å¼µã£ã¦ãã‚‹éš›ã®é«˜é€ŸåŒ–</a></li>
</ul>]]></content><author><name>Toshimaru</name></author><category term="mysql" /><summary type="html"><![CDATA[MySQL ã§ã®æ—¥ä»˜ã®ç¯„å›²æŒ‡å®šã¯ between ã‚’ä½¿ã†ã®ãŒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚‚åŠ¹ã„ã¦GOODãªæ„Ÿã˜ã€‚]]></summary></entry></feed>