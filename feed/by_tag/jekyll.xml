<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.1">Jekyll</generator><link href="https://blog.toshimaru.net/feed/by_tag/jekyll.xml" rel="self" type="application/atom+xml" /><link href="https://blog.toshimaru.net/" rel="alternate" type="text/html" /><updated>2023-04-21T11:44:23+09:00</updated><id>https://blog.toshimaru.net/feed/by_tag/jekyll.xml</id><title type="html">Hack Your Design!</title><subtitle>toshimaruの技術系なブログ</subtitle><author><name>Toshimaru</name></author><entry><title type="html">JekyllのGitHub PagesへのデプロイをGitHub Actionsを自動化する</title><link href="https://blog.toshimaru.net/jekyll-deploy-with-github-actions/" rel="alternate" type="text/html" title="JekyllのGitHub PagesへのデプロイをGitHub Actionsを自動化する" /><published>2020-06-22T00:00:00+09:00</published><updated>2020-06-22T00:00:00+09:00</updated><id>https://blog.toshimaru.net/jekyll-deploy-with-github-actions</id><content type="html" xml:base="https://blog.toshimaru.net/jekyll-deploy-with-github-actions/"><![CDATA[<p>Jekyll製<a href="https://blog.toshima.ru/">英語ブログ</a>のGitHub PagesへのデプロイをGitHub Actionsで自動化したのでそのメモ。</p>

<h2 id="今までのデプロイ方式">今までのデプロイ方式</h2>

<p>今までどうページソースをGitHub Pagesに自動デプロイしていたかでいうと、<a href="/autodeploy-jekyll/">Jekyllでgit pushをフックしてGithub Pagesへ自動デプロイ</a>するようにしていた。</p>

<p>この方法でも全く問題ないがセットアップがやや面倒。なので英語ブログは手動デプロイ状態のまま放置していた。今はGitHub Actionsを使ったデプロイ方式がナウそうだ、とのことで重い腰を上げてその方式をトライ。</p>

<h2 id="新しいデプロイ方式">新しいデプロイ方式</h2>

<p>対応したPull Request: <a href="https://github.com/toshimaru/blog.toshima.ru/pull/160">Deploy Automation with GitHub Actions · toshimaru/blog.toshima.ru</a></p>

<p>やっていることとしては至ってシンプル。</p>

<ul>
  <li>masterブランチで変更があった場合にActionをトリガー</li>
  <li><code class="language-plaintext highlighter-rouge">bundle install</code></li>
  <li><code class="language-plaintext highlighter-rouge">jekyll build</code></li>
  <li>生成した静的コンテンツのデータを<a href="https://github.com/peaceiris/actions-gh-pages">peaceiris/actions-gh-pages</a>を使って<code class="language-plaintext highlighter-rouge">gh-pages</code>ブランチにデプロイ</li>
</ul>

<h2 id="github-actions-configuration">GitHub Actions Configuration</h2>

<p>実際のyamlファイルの設定は下記の通り。</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">on</span><span class="pi">:</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">master</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">gh-pages-deploy</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Set up Ruby</span>
      <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/setup-ruby@v1</span>
      <span class="na">with</span><span class="pi">:</span>
        <span class="na">ruby-version</span><span class="pi">:</span> <span class="m">2.7</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">bundle install</span>
      <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
        <span class="s">bundle config set path 'vendor/bundle'</span>
        <span class="s">bundle install</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Jekyll Build</span>
      <span class="na">run</span><span class="pi">:</span> <span class="s">bundle exec jekyll build</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy</span>
      <span class="na">uses</span><span class="pi">:</span> <span class="s">peaceiris/actions-gh-pages@v3</span>
      <span class="na">with</span><span class="pi">:</span>
        <span class="na">personal_token</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
        <span class="na">publish_dir</span><span class="pi">:</span> <span class="s">./_site</span>
</code></pre></div></div>

<h2 id="従来と比べて良い点">従来と比べて良い点</h2>

<p><code class="language-plaintext highlighter-rouge">gh-pages</code>ブランチにpushするにあたって<code class="language-plaintext highlighter-rouge">secrets.GITHUB_TOKEN</code> でトークンをセットするだけ。</p>]]></content><author><name>Toshimaru</name></author><category term="jekyll" /><category term="github" /><category term="ci" /><summary type="html"><![CDATA[Jekyll製英語ブログのGitHub PagesへのデプロイをGitHub Actionsで自動化したのでそのメモ。]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blog.toshimaru.net/images/posts/github-pages/action-gh-pages.png" /><media:content medium="image" url="https://blog.toshimaru.net/images/posts/github-pages/action-gh-pages.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Jekyll v4.0 にアップデートした</title><link href="https://blog.toshimaru.net/jekyll-4/" rel="alternate" type="text/html" title="Jekyll v4.0 にアップデートした" /><published>2019-08-09T00:00:00+09:00</published><updated>2019-08-09T00:00:00+09:00</updated><id>https://blog.toshimaru.net/jekyll-4</id><content type="html" xml:base="https://blog.toshimaru.net/jekyll-4/"><![CDATA[<p>Jekyllの<code class="language-plaintext highlighter-rouge">4.0.0.pre.beta1</code>が降ってきていたのでアップグレードした。</p>

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">We&#39;re getting closer to releasing Jekyll 4!! 🎉 A new beta dropped just now. Please give it a try and let us know how it goes! <a href="https://t.co/CiIi2i6k7q">https://t.co/CiIi2i6k7q</a></p>&mdash; jekyll (@jekyllrb) <a href="https://twitter.com/jekyllrb/status/1158081978194911232?ref_src=twsrc%5Etfw">August 4, 2019</a></blockquote>

<h2 id="対応prdiff">対応PR/Diff</h2>

<p><a href="https://blog.toshimaru.net">日本語ブログ</a>（今見ているWebサイト）と<a href="https://blog.toshima.ru">英語ブログ</a>の２つをJekyll v4.0対応した。</p>

<ul>
  <li>日本語ブログ: <a href="https://github.com/toshimaru/blog.toshimaru.net/pull/189">Jekyll 4 by toshimaru · Pull Request #189 · toshimaru/blog.toshimaru.net</a></li>
  <li>英語ブログ: <a href="https://github.com/toshimaru/blog.toshima.ru/commit/42ecf687c4a9be00f9f9db59c2ac9ab4b4e727e3">gem ‘jekyll’, ‘4.0.0.pre.beta1’ · toshimaru/blog.toshima.ru@42ecf68</a></li>
</ul>

<p><code class="language-plaintext highlighter-rouge">bundle update jekyll</code>でjekyll v4.0 へアップグレードしてどちらのサイトも一発でbuildが通ったので、<a href="/jekyll-3/">前回のJekyll v3.0のアップグレードのとき</a>と比較しても、比較的すんなりいった気がする。</p>

<h2 id="jekyll-v40の変更点">Jekyll v4.0の変更点</h2>

<p>主要な変更は以下。</p>

<ul>
  <li>Ruby 2.3 のサポートが切られた</li>
  <li>markdown rendererのPygments, RedCarpet, rdiscountのサポートが切られた
    <ul>
      <li>kramdownのバージョンはv2に上がった</li>
    </ul>
  </li>
  <li>Cacheのハンドリングがスマートにできるようになった（？）っぽい（<a href="https://github.com/jekyll/jekyll/pull/7169">対応PR</a>）</li>
</ul>

<h2 id="jekyll-v40対応にあたってメンテしたgem">Jekyll v4.0対応にあたってメンテしたgem</h2>

<p>Jekyll v4.0対応にあたってgemのメンテが必要になったのでメンテした。</p>

<ul>
  <li><a href="https://github.com/toshimaru/jekyll-tagging-related_posts/pull/9">Drop Ruby 2.1, 2.2 Support / Drop Jekyll 3.0, 3.1, 3.2, 3.3, 3.4 Support by toshimaru · Pull Request #9 · toshimaru/jekyll-tagging-related_posts</a></li>
  <li><a href="https://github.com/toshimaru/jekyll-include_sass/pull/10">Relax jekyll dependency by toshimaru · Pull Request #10 · toshimaru/jekyll-include_sass</a></li>
</ul>

<p>（jekyll関連のgemをけっこう作っているのでいつか時間があれば本ブログで紹介したい…:thinking:）</p>

<h2 id="jekyllについて">Jekyllについて</h2>

<p>いろんな言語でいろんな静的サイトジェネレーターが登場しているが（例えばGo製の<a href="https://gohugo.io/">hugo</a>とか）、2019年も僕はJekyllを使い続けようと思っている。以下が理由。</p>

<ul>
  <li>Rubyによる柔軟な拡張が可能</li>
  <li>GitHub Pagesでも使われており、今後も継続的に改善・メンテが期待されること</li>
  <li>サイトビルドに速度が必要であればRuby以外の<a href="https://gohugo.io/">hugo</a>など検討するがそこまでビルド速度が問題となっていないこと</li>
</ul>

<p>ということでまだしばらくはjekyllとお付き合いしようと思っています（サイトデザイン作り直したいなぁ:persevere:）。</p>]]></content><author><name>Toshimaru</name></author><category term="jekyll" /><summary type="html"><![CDATA[Jekyllの4.0.0.pre.beta1が降ってきていたのでアップグレードした。 We're getting closer to releasing Jekyll 4!! 🎉 A new beta dropped just now. 日本語ブログと英語ブログの２つをJekyll v4.0対応した。bundle update jekyllでjekyll v4.0 へアップグレードしてどちらのサイトも一発でbuildが通ったので、前回のJekyll v3.0のアップグレードのときと比較しても、比較的すんなりいった気がする。]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blog.toshimaru.net/images/posts/jekyll/jekyll4.png" /><media:content medium="image" url="https://blog.toshimaru.net/images/posts/jekyll/jekyll4.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Jekyll v3.0 にアップデートした</title><link href="https://blog.toshimaru.net/jekyll-3/" rel="alternate" type="text/html" title="Jekyll v3.0 にアップデートした" /><published>2016-01-28T00:00:00+09:00</published><updated>2016-01-28T00:00:00+09:00</updated><id>https://blog.toshimaru.net/jekyll-3</id><content type="html" xml:base="https://blog.toshimaru.net/jekyll-3/"><![CDATA[<p>本サイトは<a href="https://pages.github.com/">GitHub Pages</a>の上にスタティックサイトジェネレーターであるところの<a href="https://jekyllrb.com/">Jekyll</a>を使ってサイト構築しているのだが、それを先日Jekyll 2からJekyll 3へと上げた。</p>

<p><a href="https://jekyllrb.com/news/2015/10/26/jekyll-3-0-released/">Jekyll 3.0 Released</a></p>

<p>Jekyll 3の主な変更点は以下だ。</p>

<h2 id="インクリメンタルビルドのサポート">インクリメンタルビルドのサポート</h2>

<p>これにより10秒かかってたページ再生成の処理が3秒くらいで終わるようになった。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ jekyll serve
...
Server address: http://127.0.0.1:4000/
Server running... press ctrl-c to stop.
  Regenerating: 1 file(s) changed at 2016-01-28 23:26:28 ...done in 10.443565 seconds.
  Regenerating: 1 file(s) changed at 2016-01-28 23:26:39 ...done in 10.440658 seconds.

$ jekyll serve --incremental
...
Server address: http://127.0.0.1:4000/
Server running... press ctrl-c to stop.
  Regenerating: 1 file(s) changed at 2016-01-28 23:28:47 ...done in 3.404143 seconds.
  Regenerating: 1 file(s) changed at 2016-01-28 23:29:01 ...done in 3.478217 seconds.
</code></pre></div></div>

<h2 id="ruby-193のサポートドロップ">Ruby 1.9.3のサポートドロップ</h2>

<p>そろそろRuby 1.9.3以上ではなく、Ruby 2.0以上が当たり前な世界観になってきつつある。</p>

<h2 id="いくつかのgemファイルが分離された">いくつかのgemファイルが分離された</h2>

<p><a href="https://github.com/jekyll/jekyll-coffeescript">jekyll-coffeescript</a>や<a href="https://github.com/jekyll/jekyll-paginate">jekyll-paginate</a>など、静的サイト作成において必須でない機能はgemとして分離され必要であればプラガブルに導入する形式になった。正しい進化。</p>

<h2 id="ファイル名によるタイトル付が可能に">ファイル名によるタイトル付が可能に</h2>

<p>日本語タイトル使っている僕にはあんまり関係なさそう。</p>

<h2 id="jekyll-3-対応-pull-request">Jekyll 3 対応 Pull Request</h2>

<p><a href="https://github.com/toshimaru/blog.toshimaru.net/pull/31">Jekyll3 by toshimaru · Pull Request #31 · toshimaru/blog.toshimaru.net</a></p>

<h2 id="jekyll-gem-作ってる">jekyll gem 作ってる</h2>

<p>余談だがサイト構築の上で必要なgemを２つほど作った。</p>

<ul>
  <li><a href="https://github.com/toshimaru/jekyll-tagging-related_posts">jekyll-tagging-related_posts</a></li>
  <li><a href="https://github.com/toshimaru/jekyll-toc">jekyll-toc</a></li>
</ul>

<h2 id="road-to-jekyll-31">Road to Jekyll 3.1</h2>

<p><a href="https://jekyllrb.com/news/2016/01/24/jekyll-3-1-0-released/">Jekyll 3.1.0 Released</a></p>

<p>もう出てるので近いうちに上げる。</p>

<hr />

<p>追記: 上げた。 <a href="https://github.com/toshimaru/blog.toshimaru.net/pull/34">Bundle Update on 2016-01-30 by deppbot · Pull Request #34 · toshimaru/blog.toshimaru.net</a></p>]]></content><author><name>Toshimaru</name></author><category term="jekyll" /><summary type="html"><![CDATA[本サイトはGitHub Pagesの上にスタティックサイトジェネレーターであるところのJekyllを使ってサイト構築しているのだが、それを先日Jekyll 2からJekyll 3へと上げた。 Jekyll 3.0 Released Jekyll 3の主な変更点は以下だ。]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blog.toshimaru.net/images/posts/jekyll/jekyll.png" /><media:content medium="image" url="https://blog.toshimaru.net/images/posts/jekyll/jekyll.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Jekyllでgit pushをフックしてGithub Pagesへ自動デプロイするようにした</title><link href="https://blog.toshimaru.net/autodeploy-jekyll/" rel="alternate" type="text/html" title="Jekyllでgit pushをフックしてGithub Pagesへ自動デプロイするようにした" /><published>2013-11-15T00:00:00+09:00</published><updated>2020-06-22T00:00:00+09:00</updated><id>https://blog.toshimaru.net/autodeploy-jekyll</id><content type="html" xml:base="https://blog.toshimaru.net/autodeploy-jekyll/"><![CDATA[<p>本ブログはJekyllを使って構築しているのですが<code class="language-plaintext highlighter-rouge">git push</code>したときに<a href="https://travis-ci.org/">TravisCI</a>と連携してTravis上でビルドして<a href="https://pages.github.com/">Github Page</a>へとデプロイするように変更してみました。作業にあたっては下記ブログを参考にさせていただきました。</p>

<p><a href="http://pchw.github.io/blog/2013/06/27/octopress-travis/">OctopressとTravis CIを連携させてBlog生成を自動にする</a></p>

<p>上手順において２点、注意点があります。</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">brew install travis</code>でtravisコマンドはインストールできなくなっているっぽいので<code class="language-plaintext highlighter-rouge">gem install travis</code>で対応すること。</li>
  <li>上記では公開鍵暗号方式を使っているが、<a href="https://help.github.com/articles/creating-an-access-token-for-command-line-use">OAuth Access Tokens</a>を使ったほうが手間がかからなくて楽です。</li>
</ul>

<p>ということで公開鍵暗号方式ではなくOAuth Tokenを使うようにします。その場合は下記が参考になります。</p>

<p><a href="http://tricknotes.hateblo.jp/entry/2013/06/17/020229">Middleman で作った web サイトを Travis + GitHub pages でお手軽に運用する</a></p>

<h2 id="デプロイまでの流れ">デプロイまでの流れ</h2>

<p>デプロイまでの流れとしてはこんな感じです。</p>

<ol>
  <li>githubにエントリをpushする</li>
  <li>pushをフックしてTravisCI起動（事前にService HooksでTravisと連携するように設定してある）</li>
  <li>Travis上でスタティックサイトをビルド</li>
  <li>TravisからgithubへとToken通してpushする</li>
</ol>

<p>結果的に作成した<code class="language-plaintext highlighter-rouge">.travis.yml</code>,<code class="language-plaintext highlighter-rouge">Rakefile</code>はこんな感じです。</p>

<h2 id="travisyml">.travis.yml</h2>

<div class="language-rb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="ss">sudo: </span><span class="kp">false</span>
<span class="ss">language: </span><span class="n">ruby</span>
<span class="ss">cache: </span><span class="n">bundler</span>
<span class="ss">rvm:
  </span><span class="o">-</span> <span class="mf">2.6</span><span class="o">.</span><span class="mi">3</span>

<span class="ss">before_install:
  </span><span class="o">-</span> <span class="n">gem</span> <span class="n">install</span> <span class="n">bundler</span>
<span class="ss">before_script:
  </span><span class="o">-</span> <span class="n">rake</span> <span class="n">setup</span>
<span class="ss">script:
  </span><span class="o">-</span> <span class="n">bundle</span> <span class="nb">exec</span> <span class="n">jekyll</span> <span class="n">build</span>
<span class="ss">after_success:
  </span><span class="o">-</span> <span class="p">.</span><span class="nf">/</span><span class="n">deploy</span><span class="p">.</span><span class="nf">bash</span>

<span class="ss">env:
  global:
    </span><span class="o">-</span> <span class="ss">secure: </span><span class="s2">"Gfz3Y4s2..."</span>
    <span class="o">-</span> <span class="no">GIT_COMMITTER_NAME</span><span class="o">=</span><span class="s2">"Toshimaru via TravisCI"</span>
    <span class="o">-</span> <span class="no">GIT_COMMITTER_EMAIL</span><span class="o">=</span><span class="s2">"me@toshimaru.net"</span>
    <span class="o">-</span> <span class="no">GIT_AUTHOR_NAME</span><span class="o">=</span><span class="s2">"Toshimaru via TravisCI"</span>
    <span class="o">-</span> <span class="no">GIT_AUTHOR_EMAIL</span><span class="o">=</span><span class="s2">"me@toshimaru.net"</span>
</code></pre></div></div>

<h2 id="rakefile">Rakefile</h2>

<div class="language-rb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">REPOSITORY</span> <span class="o">=</span>
  <span class="k">if</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'GH_TOKEN'</span><span class="p">]</span>
    <span class="s1">'https://$GH_TOKEN@github.com/toshimaru/blog.toshimaru.net.git'</span>
  <span class="k">else</span>
    <span class="s1">'git@github.com:toshimaru/blog.toshimaru.net.git'</span>
  <span class="k">end</span>

<span class="n">define_method</span><span class="p">(</span><span class="ss">:build_jekyll_pages</span><span class="p">)</span> <span class="p">{</span> <span class="n">sh</span> <span class="s1">'bundle exec jekyll build'</span> <span class="p">}</span>
<span class="n">define_method</span><span class="p">(</span><span class="ss">:cleanup_deploy_dir</span><span class="p">)</span> <span class="p">{</span> <span class="n">sh</span> <span class="s1">'rm -rf _deploy/*'</span> <span class="p">}</span>
<span class="n">define_method</span><span class="p">(</span><span class="ss">:put_pages_into_deploy_dir</span><span class="p">)</span> <span class="p">{</span> <span class="n">sh</span> <span class="s1">'cp -R _site/* _deploy'</span> <span class="p">}</span>

<span class="n">desc</span> <span class="s1">'Clone blog repository to _deploy directory and checkout gh-pages branch'</span>
<span class="n">task</span> <span class="ss">:setup</span> <span class="k">do</span>
  <span class="n">sh</span> <span class="s1">'rm -rf  _deploy'</span>
  <span class="n">sh</span> <span class="s2">"git clone </span><span class="si">#{</span><span class="no">REPOSITORY</span><span class="si">}</span><span class="s2"> _deploy"</span>
  <span class="n">cd</span><span class="p">(</span><span class="s1">'_deploy'</span><span class="p">)</span> <span class="p">{</span> <span class="n">sh</span> <span class="s1">'git checkout gh-pages'</span> <span class="p">}</span>
<span class="k">end</span>

<span class="n">desc</span> <span class="s1">'deploy static pages to gh-pages automatically via Travis-CI'</span>
<span class="n">task</span> <span class="ss">:autodeploy</span> <span class="k">do</span>
  <span class="n">build_jekyll_pages</span>
  <span class="n">cleanup_deploy_dir</span>
  <span class="n">put_pages_into_deploy_dir</span>
  <span class="n">cd</span> <span class="s1">'_deploy'</span> <span class="k">do</span>
    <span class="n">sh</span> <span class="s1">'git add -A'</span>
    <span class="n">sh</span> <span class="s1">'git commit -m "Update via Travis"'</span>
    <span class="n">sh</span> <span class="s2">"git push --quiet </span><span class="si">#{</span><span class="no">REPOSITORY</span><span class="si">}</span><span class="s2"> gh-pages 2&gt; /dev/null"</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>このように設定しておけばGitHub上のエディタだったり<a href="https://prose.io/">prose.io</a>みたいなサービス使ってWEB上でも記事を投稿できてグッドですね（実際はローカル上のエディタでの編集が慣れているのでWEB編集画面は使わないけど…）。</p>]]></content><author><name>Toshimaru</name></author><category term="github" /><category term="jekyll" /><summary type="html"><![CDATA[本ブログはJekyllを使って構築しているのですがgit pushしたときにTravis-CIと連携してTravis上でビルドしてGithub Pageへとデプロイするように変更してみました。]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blog.toshimaru.net/images/posts/github-pages/og.png" /><media:content medium="image" url="https://blog.toshimaru.net/images/posts/github-pages/og.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Jekyllマークダウンはデフォルトではなくkramdownを使おう</title><link href="https://blog.toshimaru.net/jekyll-markdown/" rel="alternate" type="text/html" title="Jekyllマークダウンはデフォルトではなくkramdownを使おう" /><published>2013-04-10T00:00:00+09:00</published><updated>2013-04-10T00:00:00+09:00</updated><id>https://blog.toshimaru.net/jekyll-markdown</id><content type="html" xml:base="https://blog.toshimaru.net/jekyll-markdown/"><![CDATA[<p><a href="https://github.com/jekyll/jekyll">jekyll</a> において日本語リストがうまくHTMLに変換してくれないなーって調べてたら、どうやらデフォルトのmarkdownレンダラーではダメらしい。</p>

<blockquote>
  <p>Jekyll がデフォルトの markdown レンダラーとして採用している maruku は、どうも Unicode の扱いが怪しいらしい。日本語を使っているとフォーマットが崩れることがある。オプションとして選択可能な kramdown に入れ替えることをおすすめする。 _config.yml に次の1行を足すだけでいい。</p>

  <p><a href="http://radiumsoftware.tumblr.com/post/10543406778">GitHub Pagesを使うにあたって</a></p>
</blockquote>

<p><code class="language-plaintext highlighter-rouge">_config.yml</code> に下記を追記。</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">markdown</span><span class="pi">:</span> <span class="s">kramdown</span>
</code></pre></div></div>

<p>これで日本語リスト変換もうまくいきました。</p>]]></content><author><name>Toshimaru</name></author><category term="jekyll" /><summary type="html"><![CDATA[jekyllにおいて日本語リストがうまくhtmlに変換してくれないなーって調べてたら、どうやらデフォルトのmarkdownレンダラーではダメらしい。kramdownを使うとよい。]]></summary></entry><entry><title type="html">Jekyllならここまでできる！ブログをJekyllに移行しました</title><link href="https://blog.toshimaru.net/new-blog-concept/" rel="alternate" type="text/html" title="Jekyllならここまでできる！ブログをJekyllに移行しました" /><published>2013-04-07T00:00:00+09:00</published><updated>2021-03-02T00:00:00+09:00</updated><id>https://blog.toshimaru.net/new-blog-concept</id><content type="html" xml:base="https://blog.toshimaru.net/new-blog-concept/"><![CDATA[<p><a href="/posterous-to-jekyll/">ブログをposterouからjekyllに移行</a>しました。</p>

<p>jekyll にブログを移行するにあたっていろいろ考えたことを残しておきます。</p>

<h2 id="前提">前提</h2>

<p>移行にあたり前提条件をまず洗い出しました。自分の場合こんな感じでした。</p>

<ul>
  <li>無料であること</li>
  <li>移行ツールがあること</li>
  <li>独自ドメインが使用できること</li>
  <li>デザイン変更に自由度があり、カスタマイズできること</li>
  <li>信頼できるサーバーであること(ざっくり言い換えると大手有名サービスであること）</li>
</ul>

<p>優先度が下がるが、下記のような要望も満たしているとなおよい。</p>

<ul>
  <li>JSが自由に使えたら嬉しい</li>
  <li>CMSが直感的で使いやすいこと</li>
  <li>広告とかウザいのは出ないこと</li>
</ul>

<h2 id="類似サービスの検討">類似サービスの検討</h2>

<p>今回の場合、使用していたブログサービスの閉鎖に伴いブログ移行を与儀なくされたかたちなので、まずは類似ブログサービスを検討しました。検討したのはこんな感じです。</p>

<ul>
  <li><a href="https://www.squarespace.com/">squarespace</a></li>
  <li><a href="https://www.tumblr.com/">tumblr</a></li>
  <li><a href="https://wordpress.com/">wordpress</a></li>
  <li><a href="https://hatenablog.com/">Hatena Blog</a></li>
</ul>

<p>公式でも薦められているsquarespaceを使いたいと思ったが、有料。そしてお金を払うとしても個人的にsquarespaceの価格設定が少し高く感じた。</p>

<p>無料でやるならtumblr一択、って感じかもしれないが、tumblrは5年以上前に触って手に馴染まず使わなかったサービスで、やっぱり今使ってみてもなんとなく見た目とかCMSが馴染まなかったので乗り気はしない。</p>

<h2 id="ドメインはどうするか">ドメインはどうするか？</h2>

<p>ブログは自ドメイン(<code class="language-plaintext highlighter-rouge">blog.toshimaru.net</code>)で運用していました。移行に伴って、ドメインに結びついたリンクがリンク切れを起こしてしまうのをなるだけ避けたい。</p>

<p>となるとURLが柔軟にコントロールできる必要があります。しかし上記に挙げたサービスのどれもがそのような機能は提供していませんでした。</p>

<h2 id="jekyll君に決めた">Jekyll、君に決めた！</h2>

<p>ということで、いろいろと柔軟にやるためにもハッカーの間で人気の高いJekyllという静的サイトジェネレータを使ってみることにしました（<a href="https://docs.github.com/en/github/working-with-github-pages/setting-up-a-github-pages-site-with-jekyll">ちなみにGithub PagesでもJekyllは公式サポートされてます</a>）。</p>

<p>調べてみると自分の前提条件がほとんどクリアできることがわかった。</p>

<ul>
  <li>無料</li>
  <li><a href="https://github.com/mojombo/jekyll/wiki/blog-migrations#posterous">移行ツール</a>がある</li>
  <li>独自ドメインが使用できる(CNAME)</li>
  <li>デザインはもちろん自由にカスタマイズ可能</li>
  <li>GitHub提供サーバーなのでたぶん安定性も大丈夫だろう</li>
  <li>JSもバリバリ使える</li>
  <li>URLも301リダイレクトになるが保てるようだ (_config.ymlにて設定)</li>
</ul>

<p>他にもこんないいことが。</p>

<ul>
  <li>Markdownで記事が書ける</li>
  <li>Rubyの勉強になる</li>
</ul>

<h2 id="コメント欄は設置するか">コメント欄は設置するか？</h2>

<p>SNSのプラットフォームが十分に成熟している昨今ですから、そもそもコメント欄を設置すること自体がなんとなく時代遅れになってきているのでは？と感じるのですが、Jekyllを使われている皆さんは<a href="http://disqus.com/">Disqus</a>を使ってコメント欄を設置されているようなので、それに倣ってDisqusでコメントフォームを設置。</p>

<p>なんか昔はDisqusのデザインとかがうるさくて好きになれなかったのですが、今はサイトに馴染むように大人しめに設置できるようになったので、安心して設置できました。</p>

<h2 id="jekyllブログ構築にあたり参考にしたjekyllサイト">Jekyllブログ構築にあたり参考にしたJekyllサイト</h2>

<ul>
  <li><a href="http://webtech-walker.com/">webtech-walker.com</a> - <a href="https://github.com/hokaccha/webtech-walker">(ソース)</a></li>
  <li><a href="http://fingaholic.github.io/">fingaholic.github.io</a> - <a href="https://github.com/FiNGAHOLiC/fingaholic.github.com">(ソース)</a></li>
</ul>

<p>とくにhokacchaさんのjekyll運用の仕方は大変参考になりました！</p>

<h2 id="まとめ">まとめ</h2>

<p>あなたがハッカーならば Jekyll + Github Pages は真っ先に検討すべきブログサービスです。</p>

<p>現在別のブログサービスを使って書かれている方も、現在ブログを書いていない方も、ハッカーならばJekyllを初めてみてはいかがでしょうか？</p>]]></content><author><name>Toshimaru</name></author><category term="jekyll" /><summary type="html"><![CDATA[ブログをposterouからjekyllに移行しました。jekyllに移行するにあたっていろいろ考えたことを残しておきます。]]></summary></entry><entry><title type="html">ブログをPosterousからJekyll+GitHub Pagesに移行した</title><link href="https://blog.toshimaru.net/posterous-to-jekyll/" rel="alternate" type="text/html" title="ブログをPosterousからJekyll+GitHub Pagesに移行した" /><published>2013-04-06T00:00:00+09:00</published><updated>2013-04-06T00:00:00+09:00</updated><id>https://blog.toshimaru.net/posterous-to-jekyll</id><content type="html" xml:base="https://blog.toshimaru.net/posterous-to-jekyll/"><![CDATA[<p>本ブログ（blog.toshimaru.net）は<a href="https://posterous.com/">Posterous</a>にて運用してきましたが、<a href="http://techcrunch.com/2013/02/15/posterous-will-shut-down-on-april-30th-co-founder-garry-tan-launches-posthaven-to-save-your-sites/">Posterous閉鎖</a>に伴い、ブログを新たに<a href="https://github.com/mojombo/jekyll">Jekyll</a>（Githubでホスティング）で構築しなおしました。</p>

<p>一応自分で試せる環境でひと通り確認しましたが、もしレイアウト崩れなど問題等ございましたらフィードバックいただけると幸いです。</p>

<p>今後ともよろしくお願いします。</p>]]></content><author><name>Toshimaru</name></author><category term="jekyll" /><summary type="html"><![CDATA[本ブログ（blog.toshimaru.net）はPosterousにて運用してきましたが、Posterous閉鎖に伴い、ブログを新たにJekyll（Githubでホスティング）で構築しなおしました。]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blog.toshimaru.net/images/posts/jekyll.png" /><media:content medium="image" url="https://blog.toshimaru.net/images/posts/jekyll.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry></feed>