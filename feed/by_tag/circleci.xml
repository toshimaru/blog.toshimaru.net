<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.1">Jekyll</generator><link href="https://blog.toshimaru.net/feed/by_tag/circleci.xml" rel="self" type="application/atom+xml" /><link href="https://blog.toshimaru.net/" rel="alternate" type="text/html" /><updated>2023-04-21T11:53:42+09:00</updated><id>https://blog.toshimaru.net/feed/by_tag/circleci.xml</id><title type="html">Hack Your Design!</title><subtitle>toshimaruã®æŠ€è¡“ç³»ãªãƒ–ãƒ­ã‚°</subtitle><author><name>Toshimaru</name></author><entry><title type="html">CircleCIã®ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æ¬¡ä¸–ä»£ã‚¤ãƒ¡ãƒ¼ã‚¸ cimg ã«ç§»è¡Œã™ã‚‹</title><link href="https://blog.toshimaru.net/use-circleci-cimg/" rel="alternate" type="text/html" title="CircleCIã®ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æ¬¡ä¸–ä»£ã‚¤ãƒ¡ãƒ¼ã‚¸ cimg ã«ç§»è¡Œã™ã‚‹" /><published>2021-03-05T00:00:00+09:00</published><updated>2021-03-05T00:00:00+09:00</updated><id>https://blog.toshimaru.net/use-circleci-cimg</id><content type="html" xml:base="https://blog.toshimaru.net/use-circleci-cimg/"><![CDATA[<p>2020å¹´ã«CircleCIã®æ¬¡ä¸–ä»£ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ»cimg ãŒç™»å ´ã—ã¾ã—ãŸ<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>ã€‚</p>

<p>å€‹äººã®Ruby on Railsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€å¾“æ¥ã®circleci/rubyã‹ã‚‰æ¬¡ä¸–ä»£ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã‚ã‚‹ã¨ã“ã‚ã®<a href="https://github.com/toshimaru/RailsTwitterClone/pull/920">cimg/rubyã«ç§»è¡Œ</a>ã—ã¦ã¿ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚</p>

<h2 id="ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã®å¤‰æ›´">ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã®å¤‰æ›´</h2>

<p><code class="language-plaintext highlighter-rouge">circleci/ruby</code> ã‹ã‚‰ <code class="language-plaintext highlighter-rouge">cimg/ruby</code> ã¸å¤‰æ›´ã—ã¾ã™ã€‚</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code> executors:
   default:
     working_directory: ~/app
     docker:
<span class="gi">+      - image: circleci/ruby:2.7-node-browsers
</span><span class="gd">-      - image: cimg/ruby:2.7-browsers
</span></code></pre></div></div>

<h2 id="circleci-å…¬å¼-orb-ã®åˆ©ç”¨">CircleCI å…¬å¼ Orb ã®åˆ©ç”¨</h2>

<p>ä»Šå›ã®å¤‰æ›´ã¨ã‚ã‚ã›ã¦ã€ä¸‹è¨˜ï¼’ã¤ã®CircleCIå…¬å¼Orbã‚‚å°å…¥ã—ã¾ã—ãŸã€‚</p>

<ul>
  <li><a href="https://circleci.com/developer/orbs/orb/circleci/ruby">CircleCI Developer Hub - circleci/ruby</a></li>
  <li><a href="https://circleci.com/developer/orbs/orb/circleci/browser-tools">CircleCI Developer Hub - circleci/browser-tools</a></li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">orbs</span><span class="pi">:</span>
  <span class="na">ruby</span><span class="pi">:</span> <span class="s">circleci/ruby@1.1.2</span>
  <span class="na">browser-tools</span><span class="pi">:</span> <span class="s">circleci/browser-tools@1.1.3</span>
</code></pre></div></div>

<h2 id="rspec-ã®å®Ÿè¡Œ">RSpec ã®å®Ÿè¡Œ</h2>

<p>ä¸Šè¿°ã®Orbã‚’æœ‰åŠ¹æ´»ç”¨ã™ã‚‹ã“ã¨ã§</p>

<ol>
  <li>bundle Install</li>
  <li>chromedriverã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li>
  <li>rspecã®å®Ÿè¡Œ</li>
</ol>

<p>ã®stepã‚’ä¸‹è¨˜ã®ã‚ˆã†ã«ã‚·ãƒ³ãƒ—ãƒ«ã«è¨˜è¿°ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">rspec</span><span class="pi">:</span>
  <span class="na">executor</span><span class="pi">:</span> <span class="s">default</span>
  <span class="na">steps</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">checkout</span>
    <span class="pi">-</span> <span class="s">ruby/install-deps</span>
    <span class="pi">-</span> <span class="s">browser-tools/install-chrome</span>
    <span class="pi">-</span> <span class="s">browser-tools/install-chromedriver</span>
    <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">bin/rails db:schema:load --trace</span>
    <span class="pi">-</span> <span class="s">ruby/rspec-test</span>
</code></pre></div></div>

<h2 id="rubocop-ã®å®Ÿè¡Œ">rubocop ã®å®Ÿè¡Œ</h2>

<p>rubocop ã®å®Ÿè¡Œã‚‚åŒæ§˜ã« <code class="language-plaintext highlighter-rouge">circleci/ruby</code> Orbã«çµ„ã¿è¾¼ã¾ã‚Œã¦ãŠã‚Šã€ç°¡å˜ã«å®Ÿè¡Œã§ãã¾ã™ã€‚</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">rubocop</span><span class="pi">:</span>
  <span class="na">executor</span><span class="pi">:</span> <span class="s">default</span>
  <span class="na">steps</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">checkout</span>
    <span class="pi">-</span> <span class="s">ruby/install-deps</span>
    <span class="pi">-</span> <span class="s">ruby/rubocop-check</span>
</code></pre></div></div>

<h2 id="æœ€çµ‚å½¢">æœ€çµ‚å½¢</h2>

<p>å®Ÿéš›ã« <code class="language-plaintext highlighter-rouge">circleci/ruby</code> ã‹ã‚‰ <code class="language-plaintext highlighter-rouge">cimg/ruby</code> ã¸ã¨ç§»è¡Œã—ãŸ Pull Request ã®å…¨ä½“åƒã¨ã—ã¦ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>

<p><a href="https://github.com/toshimaru/RailsTwitterClone/pull/920">Migrate CircleCI image from circleci/ruby to cimg/ruby by toshimaru Â· Pull Request</a></p>

<h2 id="å‚è€ƒãƒªãƒ³ã‚¯">å‚è€ƒãƒªãƒ³ã‚¯</h2>

<ul>
  <li>ç´¹ä»‹ã—ãŸCircleCI Orbs
    <ul>
      <li><a href="https://circleci.com/developer/orbs/orb/circleci/ruby">CircleCI Developer Hub - circleci/ruby</a></li>
      <li><a href="https://circleci.com/developer/orbs/orb/circleci/browser-tools">CircleCI Developer Hub - circleci/browser-tools</a></li>
    </ul>
  </li>
  <li><a href="https://circleci.com/developer/images/image/cimg/ruby">cimg/ruby - CircleCI</a></li>
  <li><a href="https://github.com/CircleCI-Public/circleci-demo-ruby-rails/blob/master/.circleci/config.yml">circleci-demo-ruby-rails/config.yml at master Â· CircleCI-Public/circleci-demo-ruby-rails</a></li>
</ul>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p><a href="https://circleci.com/ja/blog/announcing-our-next-generation-convenience-images-smaller-faster-more-deterministic/">æ¬¡ä¸–ä»£ã‚³ãƒ³ãƒ“ãƒ‹ã‚¨ãƒ³ã‚¹ ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒªãƒªãƒ¼ã‚¹: ã‚ˆã‚Šå°ã•ãã€é€Ÿãã€ç¢ºå®šçš„</a>Â <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>Toshimaru</name></author><category term="circleci" /><category term="ci" /><summary type="html"><![CDATA[2020å¹´ã«CircleCIã®æ¬¡ä¸–ä»£ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ»cimg ãŒç™»å ´ã—ã¾ã—ãŸã€‚å€‹äººã®Ruby on Railsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€å¾“æ¥ã®circleci/rubyã‹ã‚‰æ¬¡ä¸–ä»£ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã‚ã‚‹ã¨ã“ã‚ã®cimg/rubyã«ç§»è¡Œã—ã¦ã¿ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blog.toshimaru.net/images/posts/cimg.png" /><media:content medium="image" url="https://blog.toshimaru.net/images/posts/cimg.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">ã¯ã˜ã‚ã¦ã®CircleCI Orbsã‚’å…¬é–‹ã—ãŸ</title><link href="https://blog.toshimaru.net/my-first-circleci-orbs/" rel="alternate" type="text/html" title="ã¯ã˜ã‚ã¦ã®CircleCI Orbsã‚’å…¬é–‹ã—ãŸ" /><published>2018-12-02T00:00:00+09:00</published><updated>2018-12-02T00:00:00+09:00</updated><id>https://blog.toshimaru.net/my-first-circleci-orbs</id><content type="html" xml:base="https://blog.toshimaru.net/my-first-circleci-orbs/"><![CDATA[<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">I published my first CircleCI Orb! Â» CircleCI Orb Registry - toshimaru/bundle-install <a href="https://t.co/Ikd11JmEFd">https://t.co/Ikd11JmEFd</a></p>&mdash; toshimaru (@toshimaru_e) <a href="https://twitter.com/toshimaru_e/status/1068431295804465152?ref_src=twsrc%5Etfw">November 30, 2018</a></blockquote>

<p>ã¯ã˜ã‚ã¦ã®CircleCI Orbsã‚’å…¬é–‹ã—ãŸã€‚ãã®ãƒ¡ãƒ¢ã€‚</p>

<h2 id="circleci-orbsã¨ã¯">CircleCI Orbsã¨ã¯</h2>

<p>2018å¹´11æœˆã«æ­£å¼å…¬é–‹ã•ã‚ŒãŸCircleCI Orbsã€‚</p>

<blockquote class="twitter-tweet" data-lang="en"><p lang="ja" dir="ltr">æœ¬æ—¥Orbsã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸğŸ¥³Orbsã¯Workflowä»¥æ¥ã®ãƒ¡ã‚¸ãƒ£ãƒ¼ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ã™ã€‚Orbsã¯CircleCIã®è¨­å®šã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã™ã‚‹ä»•çµ„ã¿ã§ã€èª°ã§ã‚‚è‡ªåˆ†ã®Orbsã‚’å…¬é–‹ã§ãã¾ã™ã€‚ã“ã‚Œã¯CI/CDã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦ã¯åˆã®è©¦ã¿ã§ã€ä»Šå¾Œã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚’å·»ãè¾¼ã‚“ã§CircleCIã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>&mdash; CircleCI Japan (@CircleCIJapan) <a href="https://twitter.com/CircleCIJapan/status/1060285769124696064?ref_src=twsrc%5Etfw">November 7, 2018</a></blockquote>

<p>è¦ã¯ã„ã‚ã‚“ãªãƒ¬ãƒã‚¸ãƒˆãƒªã§ä½¿ã£ã¦ã„ã‚‹å…±é€šã®CircleCIã®è¨­å®šã‚’å…±é€šåŒ–ã§ãã‚‹ä»•çµ„ã¿ã®ã“ã¨ã€‚</p>

<h2 id="ä½œã£ã¦ã¿ãŸ">ä½œã£ã¦ã¿ãŸ</h2>

<p>åƒ•ã‚‚ã„ã‚ã‚“ãªRuby on Railsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰ã€<code class="language-plaintext highlighter-rouge">bundle install</code>ã‚’CircleCI Orbsã‚’ä½¿ã£ã¦å…±é€šåŒ–ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¦ã¿ã¾ã—ãŸã€‚</p>

<ul>
  <li>çµæœã§ããŸã®ãŒã“ã¡ã‚‰: <a href="https://circleci.com/orbs/registry/orb/toshimaru/bundle-install">CircleCI Orb Registry - toshimaru/bundle-install</a></li>
  <li>GitHubã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰: <a href="https://github.com/toshimaru/bundle-install">toshimaru/bundle-install</a></li>
</ul>

<h2 id="ä½œã‚Šæ–¹">ä½œã‚Šæ–¹</h2>

<h3 id="install-circleci-command">Install circleci command</h3>

<p>ã¾ãšã¯circleciã‚³ãƒãƒ³ãƒ‰ã‚’å…¥æ‰‹ã€‚MacOSã®å ´åˆä¸‹è¨˜ã®ã‚ˆã†ã«brewã§å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew install circleci
</code></pre></div></div>

<h3 id="namespace-ä½œæˆ">namespace ä½œæˆ</h3>

<p>namespaceã‚’å–å¾—ã—ã¾ã™ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ circleci namespace create toshimaru github toshimaru
</code></pre></div></div>

<h3 id="orb-ä½œæˆ">Orb ä½œæˆ</h3>

<p>namespaceä»¥ä¸‹ã®orbåã‚’ä½œæˆã—ã¾ã™ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ circleci orb create toshimaru/bundle-install
Orb toshimaru/bundle-install created.
Please note that any versions you publish of this orb are world-readable.

You can now register versions of toshimaru/bundle-install using circleci orb publish.
</code></pre></div></div>

<h3 id="publish-circleci-orb">Publish CircleCI Orb</h3>

<p>ä½œæˆã—ãŸ<code class="language-plaintext highlighter-rouge">orb.yml</code>ã‚’å…¬é–‹ã—ã¾ã™ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ circleci orb publish src/orb.yml toshimaru/bundle-install@0.0.1
Orb toshimaru/bundle-install@0.0.1 was published.
Please note that this is an open orb and is world-readable.
</code></pre></div></div>

<h2 id="ä½œæˆã—ãŸorbã‚’ä½¿ã†">ä½œæˆã—ãŸOrbã‚’ä½¿ã†</h2>

<p>æ¬¡ã«ä½œæˆã—ãŸOrbã‚’ä½¿ã†å´ã€å‘¼ã³å‡ºã™å´ã®è¨­å®šã§ã™ã€‚</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">orbs</span><span class="pi">:</span>
  <span class="na">bundle-install</span><span class="pi">:</span> <span class="s">toshimaru/bundle-install@0.1.0</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">docker</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">circleci/ruby</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">checkout</span>
      <span class="pi">-</span> <span class="s">bundle-install/bundle-install</span>
      <span class="c1"># - bundle exec rspec</span>
</code></pre></div></div>

<p>å®Ÿéš›ã«ä¸‹è¨˜ã®PRã§Orbã®å¤‰æ›´ä¾‹ãŒè¦‹ã‚Œã¾ã™ã®ã§ã”å‚ç…§ãã ã•ã„ã€‚</p>

<p><a href="https://github.com/toshimaru/RailsTwitterClone/pull/264/files">Introduce CircleCI Orbs by toshimaru Â· Pull Request #264</a></p>

<h2 id="å‚è€ƒã«ã—ãŸè¨˜äº‹">å‚è€ƒã«ã—ãŸè¨˜äº‹</h2>

<ul>
  <li>å…¨ä½“çš„ã«ã“ã¡ã‚‰ã®æ‰‹é †ã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚ <a href="https://blog.tsub.me/post/introducing-to-circleci-orbs/">CircleCI Orbs å…¥é–€ | tsubâ€™s blog</a></li>
  <li>ãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹æˆãªã©ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚https://github.com/sue445/circleci-ruby-orbs</li>
</ul>]]></content><author><name>Toshimaru</name></author><category term="circleci" /><category term="oss" /><summary type="html"><![CDATA[ã¯ã˜ã‚ã¦ã®CircleCI Orbsã‚’å…¬é–‹ã—ãŸã€‚ãã®ãƒ¡ãƒ¢ã€‚2018å¹´11æœˆã«æ­£å¼å…¬é–‹ã•ã‚ŒãŸCircleCI Orbsã€‚æœ¬æ—¥Orbsã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã€‚Orbsã¯Workflowä»¥æ¥ã®ãƒ¡ã‚¸ãƒ£ãƒ¼ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ã™ã€‚Orbsã¯CircleCIã®è¨­å®šã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã™ã‚‹ä»•çµ„ã¿ã§ã€èª°ã§ã‚‚è‡ªåˆ†ã®Orbsã‚’å…¬é–‹ã§ãã¾ã™ã€‚ã“ã‚Œã¯CI/CDã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦ã¯åˆã®è©¦ã¿ã§ã€ä»Šå¾Œã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚’å·»ãè¾¼ã‚“ã§CircleCIã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚è¦ã¯ã„ã‚ã‚“ãªãƒ¬ãƒã‚¸ãƒˆãƒªã§ä½¿ã£ã¦ã„ã‚‹å…±é€šã®CircleCIã®è¨­å®šã‚’å…±é€šåŒ–ã§ãã‚‹ä»•çµ„ã¿ã®ã“ã¨ã€‚åƒ•ã‚‚ã„ã‚ã‚“ãªRuby on Railsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰ã€bundle installã‚’CircleCI Orbsã‚’ä½¿ã£ã¦å…±é€šåŒ–ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¦ã¿ã¾ã—ãŸã€‚]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blog.toshimaru.net/images/posts/circleci-orb.png" /><media:content medium="image" url="https://blog.toshimaru.net/images/posts/circleci-orb.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">reviewdogã‚’ä½¿ã£ã¦CIä¸Šã§RuboCopè‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å‹•ã‹ã™</title><link href="https://blog.toshimaru.net/reviewdog-rubocop/" rel="alternate" type="text/html" title="reviewdogã‚’ä½¿ã£ã¦CIä¸Šã§RuboCopè‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å‹•ã‹ã™" /><published>2018-11-19T00:00:00+09:00</published><updated>2020-06-08T00:00:00+09:00</updated><id>https://blog.toshimaru.net/reviewdog-rubocop</id><content type="html" xml:base="https://blog.toshimaru.net/reviewdog-rubocop/"><![CDATA[<p><a href="https://github.com/rubocop-hq/rubocop">rubocop</a>ã®è‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’<a href="https://github.com/haya14busa/reviewdog">reviewdog</a>ã‚’ä½¿ã£ã¦ã‚„ã£ã¦ã¿ãŸã®ã§ãã®çŸ¥è¦‹ã§ã™ã€‚</p>

<ul id="markdown-toc">
  <li><a href="#è¿½è¨˜" id="markdown-toc-è¿½è¨˜">è¿½è¨˜</a></li>
  <li><a href="#auto-rubocop-on-circleci-powered-by-reviewdog" id="markdown-toc-auto-rubocop-on-circleci-powered-by-reviewdog">Auto-RuboCop on CircleCI powered by reviewdog</a>    <ul>
      <li><a href="#1-configymlã®è¨­å®š" id="markdown-toc-1-configymlã®è¨­å®š">1. <code class="language-plaintext highlighter-rouge">config.yml</code>ã®è¨­å®š</a></li>
      <li><a href="#2ã‚³ãƒ¡ãƒ³ãƒˆã§ãã‚‹tokenã‚’å–å¾—--è¨­å®š" id="markdown-toc-2ã‚³ãƒ¡ãƒ³ãƒˆã§ãã‚‹tokenã‚’å–å¾—--è¨­å®š">2.ã‚³ãƒ¡ãƒ³ãƒˆã§ãã‚‹Tokenã‚’å–å¾— &amp; è¨­å®š</a></li>
      <li><a href="#3-rubucopã®çµæœã‚’reviewdogã§é€šçŸ¥" id="markdown-toc-3-rubucopã®çµæœã‚’reviewdogã§é€šçŸ¥">3. rubucopã®çµæœã‚’reviewdogã§é€šçŸ¥</a></li>
    </ul>
  </li>
  <li><a href="#å®Œæˆyamlã‚¤ãƒ¡ãƒ¼ã‚¸" id="markdown-toc-å®Œæˆyamlã‚¤ãƒ¡ãƒ¼ã‚¸">å®Œæˆyamlã‚¤ãƒ¡ãƒ¼ã‚¸</a></li>
  <li><a href="#ãªãœreviewdogãªã®ã‹" id="markdown-toc-ãªãœreviewdogãªã®ã‹">ãªãœreviewdogãªã®ã‹</a></li>
  <li><a href="#æœ€å¾Œã«" id="markdown-toc-æœ€å¾Œã«">æœ€å¾Œã«</a></li>
  <li><a href="#å‚è€ƒè³‡æ–™" id="markdown-toc-å‚è€ƒè³‡æ–™">å‚è€ƒè³‡æ–™</a></li>
</ul>

<h2 id="è¿½è¨˜">è¿½è¨˜</h2>

<p>æœ¬è¨˜äº‹ã® GitHub Actions ç‰ˆã‚’æ›¸ãã¾ã—ãŸã€‚</p>

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">blogged. | reviewdogã‚’ä½¿ã£ã¦GitHub Actionsä¸Šã§RuboCopè‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å‹•ã‹ã™ - Hack Your Design! <a href="https://t.co/4u11iBjm6G">https://t.co/4u11iBjm6G</a></p>&mdash; toshimaru (@toshimaru_e) <a href="https://twitter.com/toshimaru_e/status/1267121968307814401?ref_src=twsrc%5Etfw">May 31, 2020</a></blockquote>

<h2 id="auto-rubocop-on-circleci-powered-by-reviewdog">Auto-RuboCop on CircleCI powered by reviewdog</h2>

<p>åƒ•ã®ä½œã£ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§rubocopè‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’CircleCIä¸Šã§è¨­å®šã—ã¦ã¿ã¾ã—ãŸã€‚ãã®ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¦‹ã¦ã‚‚ã‚‰ã†ã®ãŒä¸€ç•ªæ—©ã„ã¨æ€ã„ã¾ã™ã®ã§ã€ä¸‹è¨˜ãƒªãƒ³ã‚¯ã‚ˆã‚Šå·®åˆ†ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>

<p><a href="https://github.com/toshimaru/RailsTwitterClone/pull/254">https://github.com/toshimaru/RailsTwitterClone/pull/254</a></p>

<h3 id="1-configymlã®è¨­å®š">1. <code class="language-plaintext highlighter-rouge">config.yml</code>ã®è¨­å®š</h3>

<p>åŸºæœ¬çš„ã«ã¯<a href="https://github.com/haya14busa/reviewdog#circle-ci">å…¬å¼READMEã®CircleCIã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †</a>é€šã‚Šã§ã™ãŒã€ã¾ãšã¯ä¸‹è¨˜ã®ã‚ˆã†ã«reviewdogã®ãƒã‚¤ãƒŠãƒªã‚’<code class="language-plaintext highlighter-rouge">curl</code>çµŒç”±ã§è½ã¨ã—ã¾ã™ã€‚</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ç’°å¢ƒå¤‰æ•°ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹reviewdogã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®š</span>
<span class="na">environment</span><span class="pi">:</span>
  <span class="na">REVIEWDOG_VERSION</span><span class="pi">:</span> <span class="s2">"</span><span class="s">0.9.11"</span>

<span class="c1"># reviewdogã‚’curlã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</span>
<span class="pi">-</span> <span class="na">run</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Install reviewdog</span>
    <span class="na">command</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">curl -fSL https://github.com/haya14busa/reviewdog/releases/download/$REVIEWDOG_VERSION/reviewdog_linux_amd64 -o reviewdog &amp;&amp; chmod +x ./reviewdog</span>
</code></pre></div></div>

<h3 id="2ã‚³ãƒ¡ãƒ³ãƒˆã§ãã‚‹tokenã‚’å–å¾—--è¨­å®š">2.ã‚³ãƒ¡ãƒ³ãƒˆã§ãã‚‹Tokenã‚’å–å¾— &amp; è¨­å®š</h3>

<p>reviewdogã«ã‚³ãƒ¡ãƒ³ãƒˆã•ã›ã‚‹ãŸã‚ã«ã¯ã‚³ãƒ¡ãƒ³ãƒˆã§ãã‚‹æ¨©é™ã‚’æŒã£ãŸGitHub TokenãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ä¸‹è¨˜æ‰‹é †ã§GitHub Tokenã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚</p>

<ul>
  <li><a href="https://github.com/settings/tokens">ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—ãƒšãƒ¼ã‚¸</a>ã«ã„ã</li>
  <li>ä¸‹è¨˜ã®æ¨©é™ã‚’è¨­å®šã—ã¦Tokenã‚’ç™ºè¡Œ
    <ul>
      <li>Privateãƒ¬ãƒã‚¸ãƒˆãƒªã®è¨­å®š: <code class="language-plaintext highlighter-rouge">repo</code>ã‚’ãƒã‚§ãƒƒã‚¯</li>
      <li>Publicãƒ¬ãƒã‚¸ãƒˆãƒªã®è¨­å®š: <code class="language-plaintext highlighter-rouge">public_repo</code>ã‚’ãƒã‚§ãƒƒã‚¯</li>
    </ul>
  </li>
</ul>

<p>ã“ã‚Œã§TokenãŒç™ºè¡Œã§ãã¾ã—ãŸã®ã§ã€æ¬¡ã«ãã®Tokenã®è¨­å®šã§ã™ã€‚</p>

<ul>
  <li>CircleCIã®ç’°å¢ƒå¤‰æ•°ã®è¨­å®šç”»é¢ã‚’é–‹ã</li>
  <li>ä¸‹è¨˜ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
    <ul>
      <li><code class="language-plaintext highlighter-rouge">REVIEWDOG_GITHUB_API_TOKEN</code>ã®å€¤ã«å‰æ‰‹é †ã§å–å¾—ã—ãŸTokenã‚’è¨­å®š</li>
    </ul>
  </li>
</ul>

<p>ã“ã‚Œã«ã¦reviewdogã«ã‚³ãƒ¡ãƒ³ãƒˆã§ãã‚‹æ¨©é™ãŒä»˜ä¸ã•ã‚Œã¾ã—ãŸã€‚</p>

<h3 id="3-rubucopã®çµæœã‚’reviewdogã§é€šçŸ¥">3. rubucopã®çµæœã‚’reviewdogã§é€šçŸ¥</h3>

<p>ã‚ã¨ã¯ã„ã¤ã‚‚é€šã‚Šã®rubocopã®ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒ‘ã‚¤ãƒ—ã—ã¦reviewdogã«æ¸¡ã—ã¦ã‚ã’ã‚Œã°OKã€‚ãã®éš›ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ <code class="language-plaintext highlighter-rouge">-f=rubocop</code>ï¼ˆrubocopãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæŒ‡å®šï¼‰, <code class="language-plaintext highlighter-rouge">-reporter=github-pr-review</code>ï¼ˆGitHub PRãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆå½¢å¼ã®æŒ‡å®šï¼‰ ã®ï¼’ã¤ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">bundle exec rubocop | ./reviewdog -f=rubocop -reporter=github-pr-review</span>
</code></pre></div></div>

<h2 id="å®Œæˆyamlã‚¤ãƒ¡ãƒ¼ã‚¸">å®Œæˆyamlã‚¤ãƒ¡ãƒ¼ã‚¸</h2>

<p><code class="language-plaintext highlighter-rouge">.circleci/config.yml</code>ã®å®Œæˆã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ä¸‹è¨˜ã§ã™ï¼ˆå®Œå…¨ãªyamlãƒ•ã‚¡ã‚¤ãƒ«<a href="https://github.com/toshimaru/RailsTwitterClone/pull/254/files">å½“è©²Pull Request</a>ã‚ˆã‚Šç¢ºèªã—ã¦ãã ã•ã„ï¼‰ã€‚ãªãŠCircleCIã¯version2.1ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼ˆç¾æ™‚ç‚¹ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰ã€‚</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="m">2.1</span>
<span class="na">executors</span><span class="pi">:</span>
  <span class="na">default</span><span class="pi">:</span>
    <span class="na">working_directory</span><span class="pi">:</span> <span class="s">~/app</span>
    <span class="na">docker</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">circleci/ruby:2.5-node-browsers</span>
        <span class="na">environment</span><span class="pi">:</span>
          <span class="na">RAILS_ENV</span><span class="pi">:</span> <span class="s">test</span>
          <span class="na">REVIEWDOG_VERSION</span><span class="pi">:</span> <span class="s">0.9.11</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">rubocop</span><span class="pi">:</span>
    <span class="na">executor</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">default</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">checkout</span>
      <span class="pi">-</span> <span class="s">bundle_install</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">Install reviewdog</span>
          <span class="na">command</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">curl -fSL https://github.com/haya14busa/reviewdog/releases/download/$REVIEWDOG_VERSION/reviewdog_linux_amd64 -o reviewdog &amp;&amp; chmod +x ./reviewdog</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">bundle exec rubocop | ./reviewdog -f=rubocop -reporter=github-pr-review</span>

<span class="na">workflows</span><span class="pi">:</span>
  <span class="na">test</span><span class="pi">:</span>
    <span class="na">jobs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">...çœç•¥...</span>
</code></pre></div></div>

<h2 id="ãªãœreviewdogãªã®ã‹">ãªãœreviewdogãªã®ã‹</h2>

<p>ruboopè‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãŸã‚ã®æ—¢ã«ã‚ã‚‹ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã¯ã€<a href="https://github.com/packsaddle/ruby-saddler">Saddler</a>ã‚„<a href="https://github.com/prontolabs/pronto">pronto</a>ãªã©ãŒã‚ã‚Šã¾ã™ãŒã€ãªãœãã‚Œã‚‰ã‚’ä½¿ã‚ãšã«reviewdogã‚’æ¡ç”¨ã—ãŸã®ã‹ã¨ã„ã†ã¨ä¸‹è¨˜ã®ç†ç”±ã‹ã‚‰ã§ã™ã€‚</p>

<ul>
  <li>Goã®ã‚·ãƒ³ã‚°ãƒ«ãƒã‚¤ãƒŠãƒªãƒãƒ³ç½®ãï¼ˆcurlãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰ï¼‰ã§SetupãŒã‚ã¡ã‚ƒãã¡ã‚ƒæ¥½</li>
  <li>Language Agnostic ï¼ˆRubyä»¥å¤–ã‚‚Go, PHP, Pythonãªã©ä»–è¨€èªã§ä½¿ãˆã‚‹ï¼‰</li>
  <li>Goå®Ÿè£…ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ã„</li>
  <li>Activeã«ãƒ¡ãƒ³ãƒ†ã•ã‚Œã¦ã„ã‚‹</li>
  <li>READMEãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå……å®Ÿã—ã¦ã„ã‚‹</li>
  <li>æ—¥æœ¬äººãŒä½œã£ã¦ã„ã‚‹ï¼ï¼ˆãŠã¾ã‘ç†ç”±</li>
</ul>

<h2 id="æœ€å¾Œã«">æœ€å¾Œã«</h2>

<p>æœ¬è¨˜äº‹ã§ã¯Rubyãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®rubocop checkã‚’reviewdogã‚’ä½¿ã£ã¦CircleCIä¸Šã§å‹•ã‹ã™ä¾‹ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p>

<p>å…¬å¼READMEã«ã¯TravisCIä¸Šã§ã®å‹•ã‹ã—æ–¹ã§ã‚ã£ãŸã‚Šã€GitHubã®æ–°æ©Ÿèƒ½ãƒ»GitHub Checkså½¢å¼ã§ã®å‹•ã‹ã—æ–¹ã‚‚è¨˜è¼‰ã•ã‚Œã¦ãŠã‚Šã¾ã™ã®ã§ã€èˆˆå‘³ãŒã‚ã‚‹ã‹ãŸã¯å…¬å¼READMEã‚’ã”å‚ç…§ãã ã•ã„ã€‚</p>

<h2 id="å‚è€ƒè³‡æ–™">å‚è€ƒè³‡æ–™</h2>

<ul>
  <li><a href="https://github.com/haya14busa/reviewdog">haya14busa/reviewdog</a></li>
  <li><a href="http://haya14busa.com/reviewdog/">reviewdog ã‚’é£¼ã£ã¦ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„é–‹ç™ºã‚’æ”¹å–„ã—ã¾ã›ã‚“ã‹ - haya14busa</a></li>
  <li><a href="https://qiita.com/azu/items/c563da0b5455a1b1dca2">reviewdogã‚’ä½¿ã£ã¦textlintã®çµæœã‚’Pull Requestã«æ›¸ãè¾¼ã‚€æ–¹æ³• - Qiita</a></li>
</ul>]]></content><author><name>Toshimaru</name></author><category term="review" /><category term="rubocop" /><category term="github" /><category term="circleci" /><category term="ci" /><summary type="html"><![CDATA[rubocopã®è‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’reviewdogã‚’ä½¿ã£ã¦ã‚„ã£ã¦ã¿ãŸã®ã§ãã®çŸ¥è¦‹ã§ã™ã€‚ Auto-RuboCop on CircleCI powered by reviewdog åƒ•ã®ä½œã£ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§rubocopè‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’CircleCIä¸Šã§è¨­å®šã—ã¦ã¿ã¾ã—ãŸã€‚ãã®ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¦‹ã¦ã‚‚ã‚‰ã†ã®ãŒä¸€ç•ªæ—©ã„ã¨æ€ã„ã¾ã™ã®ã§ã€ä¸‹è¨˜ãƒªãƒ³ã‚¯ã‚ˆã‚Šå·®åˆ†ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚åŸºæœ¬çš„ã«ã¯å…¬å¼READMEã®CircleCIã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †é€šã‚Šã§ã™ãŒã€ã¾ãšã¯ä¸‹è¨˜ã®ã‚ˆã†ã«reviewdogã®ãƒã‚¤ãƒŠãƒªã‚’curlçµŒç”±ã§è½ã¨ã—ã¾ã™ã€‚reviewdogã«ã‚³ãƒ¡ãƒ³ãƒˆã•ã›ã‚‹ãŸã‚ã«ã¯ã‚³ãƒ¡ãƒ³ãƒˆã§ãã‚‹æ¨©é™ã‚’æŒã£ãŸGitHub TokenãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ä¸‹è¨˜æ‰‹é †ã§GitHub Tokenã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blog.toshimaru.net/images/posts/rubocop_x_reviewdog.jpg" /><media:content medium="image" url="https://blog.toshimaru.net/images/posts/rubocop_x_reviewdog.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry></feed>