<!doctype html>
<html class="no-js" lang="ja">
<head>
  <meta charset="utf-8">
  <title>docker-compose で Rails 環境を構築する - Hack Your Design!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="manifest" href="/site.webmanifest">
  <link rel="apple-touch-icon" href="/icon.png">

  <link rel="stylesheet" href="/css/main.css">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@toshimaru_e">
  <meta name="twitter:title" content="docker-compose で Rails 環境を構築する - Hack Your Design!">
  <meta property="og:title" content="docker-compose で Rails 環境を構築する - Hack Your Design!">
  <meta name="description" content="docker-machine, docker-compose を使ってローカルにdocker Rails環境を構築してみます。">
  <meta name="twitter:description" content="docker-machine, docker-compose を使ってローカルにdocker Rails環境を構築してみます。">
  <meta property="og:description" content="docker-machine, docker-compose を使ってローカルにdocker Rails環境を構築してみます。">
  <meta property="og:image" content="https://blog.toshimaru.net/images/posts/docker/compose.png" />
  <meta name="twitter:image" content="https://blog.toshimaru.net/images/posts/docker/compose.png" /><meta property="og:type" content="article">
  <meta property="article:published_time" content="2016-04-09T00:00:00+09:00"><link rel="canonical" href="https://blog.toshimaru.net/docker-compose-rails/">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-P34X4D');</script>
  <!-- End Google Tag Manager -->
  <link type="application/atom+xml" rel="alternate" href="https://blog.toshimaru.net/atom.xml" title="Hack Your Design!" />
</head>
<body>
  <!--[if IE]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P34X4D" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <header class="clearfix">
<div id="header-top">
  <h1 id="logo"><a href="/">Hack Your Design!</a></h1>
</div>
<div id="toggle-menu" class="clearfix"><i class="icon-reorder"></i></div>
<nav id="navigation">
  <div id="toggle-item">
  <a href="/">Blog</a>
  <a href="/archive/">Archive</a>
  <a href="/about/">About</a>
  <a href="/atom.xml" class="icon rss"><i class="icon-rss-sign"></i></a>
  <a class="icon search-area">
    <i class="icon-search"></i>
    <form id="search-form" action="/search/" method="get">
      <input type="text" class="search-txt" name="q" placeholder="Search">
    </form>
  </a>
  </div>
</nav>
</header>

  <div class="main-wrapper">
    <div class="main clearfix">
      <div id="contents">
       <div class="post">
  <h1 class="fadeInLeft">docker-compose で Rails 環境を構築する</h1>
  <div class="meta">
    <div class="clearfix">
      <i class="icon-calendar"></i><time datetime="2016-04-09T00:00:00+09:00" pubdate>2016/04/09</time>
      <i class="icon-tags"></i> 
<a href="/tag/docker/" rel="tag">docker</a>


    </div>
    <img class="post-image" src="/images/posts/docker/compose.png" alt="(image)docker-compose で Rails 環境を構築する" title="docker-compose で Rails 環境を構築する">
  </div>
</div>

<div id="md-content">
  <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#%E5%89%8D%E6%8F%90">前提</a></li>
<li class="toc-entry toc-h2">
<a href="#docker-machine-%E6%BA%96%E5%82%99">docker-machine 準備</a>
<ul>
<li class="toc-entry toc-h3"><a href="#%E7%92%B0%E5%A2%83%E5%A4%89%E6%95%B0%E8%A8%AD%E5%AE%9A">環境変数設定</a></li>
</ul>
</li>
<li class="toc-entry toc-h2">
<a href="#rails%E8%A8%AD%E5%AE%9A">Rails設定</a>
<ul>
<li class="toc-entry toc-h3"><a href="#dockerfile">Dockerfile</a></li>
<li class="toc-entry toc-h3"><a href="#docker-composeyml">docker-compose.yml</a></li>
<li class="toc-entry toc-h3"><a href="#gemfile-gemfilelock">Gemfile, Gemfile.lock</a></li>
<li class="toc-entry toc-h3"><a href="#rails-new">rails new</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E8%A8%AD%E5%AE%9A">データベース設定</a></li>
<li class="toc-entry toc-h2"><a href="#docker-compose-up">docker-compose up</a></li>
<li class="toc-entry toc-h2"><a href="#%E5%8F%82%E8%80%83">参考</a></li>
</ul>
  <p><code class="highlighter-rouge">docker-machine</code>, <code class="highlighter-rouge">docker-compose</code> を使ってローカルにRails on docker な環境を構築してみます。</p>

<h2 id="前提">
<a class="anchor" href="#%E5%89%8D%E6%8F%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>前提</h2>

<ul>
  <li>docker-machine</li>
  <li>docker-compose</li>
</ul>

<p>それぞれのバージョンは下記の通り。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker-machine <span class="nt">-v</span>
<span class="go">docker-machine version 0.6.0, build e27fb87

</span><span class="gp">$</span><span class="w"> </span>docker-compose <span class="nt">-v</span>
<span class="go">docker-compose version 1.6.2, build unknown
</span></code></pre></div></div>

<h2 id="docker-machine-準備">
<a class="anchor" href="#docker-machine-%E6%BA%96%E5%82%99" aria-hidden="true"><span class="octicon octicon-link"></span></a>docker-machine 準備</h2>

<p><code class="highlighter-rouge">docker-machine create</code> でdefaultのmachineを作成します。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker-machine create <span class="nt">--driver</span> virtualbox default
<span class="go">Running pre-create checks...
(...snip...)
(default) Creating VirtualBox VM...
(default) Creating SSH key...
(default) Starting the VM...
(default) Check network to re-create if needed...
(default) Found a new host-only adapter: "vboxnet0"
(default) Waiting for an IP...
Waiting for machine to be running, this may take a few minutes...
Detecting operating system of created instance...
Waiting for SSH to be available...
Detecting the provisioner...
Provisioning with boot2docker...
Copying certs to the local machine directory...
Copying certs to the remote machine...
Setting Docker configuration on the remote daemon...
Checking connection to Docker...
Docker is up and running!
To see how to connect your Docker Client to the Docker Engine running on this virtual machine, run: docker-machine env default
</span></code></pre></div></div>

<p><code class="highlighter-rouge">docker-machine ls</code> で状態を確認。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker-machine <span class="nb">ls</span>
<span class="go">NAME      ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER    ERRORS
default   -        virtualbox   Running   tcp://192.168.99.100:2376           v1.10.3
</span></code></pre></div></div>

<p>STATE: Running になってますね。</p>

<h3 id="環境変数設定">
<a class="anchor" href="#%E7%92%B0%E5%A2%83%E5%A4%89%E6%95%B0%E8%A8%AD%E5%AE%9A" aria-hidden="true"><span class="octicon octicon-link"></span></a>環境変数設定</h3>

<p>docker-machine の環境変数をセットします。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">eval</span> <span class="s2">"</span><span class="si">$(</span>docker-machine <span class="nb">env </span>default<span class="si">)</span><span class="s2">"</span>
</code></pre></div></div>

<h2 id="rails設定">
<a class="anchor" href="#rails%E8%A8%AD%E5%AE%9A" aria-hidden="true"><span class="octicon octicon-link"></span></a>Rails設定</h2>

<h3 id="dockerfile">
<a class="anchor" href="#dockerfile" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dockerfile</h3>

<p>このように<code class="highlighter-rouge">Dockerfile</code>を作成します。</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> ruby:2.3.0</span>
<span class="k">RUN </span>apt-get update <span class="nt">-qq</span> <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> build-essential libpq-dev
<span class="k">RUN </span><span class="nb">mkdir</span> /myapp
<span class="k">WORKDIR</span><span class="s"> /myapp</span>
<span class="k">ADD</span><span class="s"> Gemfile /myapp/Gemfile</span>
<span class="k">ADD</span><span class="s"> Gemfile.lock /myapp/Gemfile.lock</span>
<span class="k">RUN </span>bundle <span class="nb">install</span>
<span class="k">ADD</span><span class="s"> . /myapp</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">Dockerfile</code>に書いてある内容はだいたいこんな感じ。</p>

<ul>
  <li>
<code class="highlighter-rouge">FROM</code>: Docker hub のrubyイメージ、2.3.0タグをベースイメージとする</li>
  <li>
<code class="highlighter-rouge">WORKDIR</code>: <code class="highlighter-rouge">mkdir /myapp</code>してそこをワーキングディレクトリと宣言</li>
  <li>
<code class="highlighter-rouge">Gemfile</code>, <code class="highlighter-rouge">Gemfile.lock</code>を追加</li>
  <li>
<code class="highlighter-rouge">WORKDIR</code>にて<code class="highlighter-rouge">bundle install</code>する</li>
</ul>

<h3 id="docker-composeyml">
<a class="anchor" href="#docker-composeyml" aria-hidden="true"><span class="octicon octicon-link"></span></a>docker-compose.yml</h3>

<p><code class="highlighter-rouge">docker-compose.yml</code>を用意します。<code class="highlighter-rouge">docker-compose.yml</code>はこんな感じです。</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">2'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">db</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mysql</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">MYSQL_ALLOW_EMPTY_PASSWORD</span><span class="pi">:</span> <span class="s2">"</span><span class="s">yes"</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">bundle exec rails s -p 3000 -b '0.0.0.0'</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">.:/myapp</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">3000:3000"</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">db</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">web</code>, <code class="highlighter-rouge">db</code> の２つのサービスを用意します。今回は<code class="highlighter-rouge">db</code>はmysqlでいきます。</p>

<h3 id="gemfile-gemfilelock">
<a class="anchor" href="#gemfile-gemfilelock" aria-hidden="true"><span class="octicon octicon-link"></span></a>Gemfile, Gemfile.lock</h3>

<p><code class="highlighter-rouge">Gemfile</code>はこんな感じ。rails 4.2.6 でいきましょう。</p>

<div class="language-rb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">source</span> <span class="s1">'https://rubygems.org'</span>
<span class="n">gem</span> <span class="s1">'rails'</span><span class="p">,</span> <span class="s1">'4.2.6'</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">Gemfile.lock</code>は空っぽで <img class="emoji" title=":ok:" alt=":ok:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f197.png" height="20" width="20"> .</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">touch </span>Gemfile.lock
</code></pre></div></div>

<h3 id="rails-new">
<a class="anchor" href="#rails-new" aria-hidden="true"><span class="octicon octicon-link"></span></a>rails new</h3>

<p>これで準備完了。次に<code class="highlighter-rouge">docker-compose</code>を通して<code class="highlighter-rouge">rails new</code>します。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker-compose run web rails new <span class="nb">.</span> <span class="nt">--force</span> <span class="nt">--database</span><span class="o">=</span>mysql <span class="nt">--skip-bundle</span>
</code></pre></div></div>

<p>これでwebコンテナが起動して<code class="highlighter-rouge">rails new</code>され、カレントディレクトリにその成果物が生成されています。</p>

<p>Gemfileの<code class="highlighter-rouge">therubyracer</code> gemのコメントを外して<code class="highlighter-rouge">docker-compose build</code>します。</p>

<div class="language-rb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gem</span> <span class="s1">'therubyracer'</span><span class="p">,</span> <span class="ss">platforms: :ruby</span>
</code></pre></div></div>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker-compose build
<span class="go">db uses an image, skipping
Building web
Step 1 : FROM ruby:2.3.0
</span><span class="gp"> ---&gt;</span><span class="w"> </span>268e5f4c6264
<span class="go">Step 2 : RUN apt-get update -qq &amp;&amp; apt-get install -y build-essential libpq-dev
</span><span class="gp"> ---&gt;</span><span class="w"> </span>Using cache
<span class="gp"> ---&gt;</span><span class="w"> </span>b5f055055282
<span class="go">Step 3 : RUN mkdir /myapp
</span><span class="gp"> ---&gt;</span><span class="w"> </span>Using cache
<span class="gp"> ---&gt;</span><span class="w"> </span>ef58bac5859f
<span class="go">Step 4 : WORKDIR /myapp
</span><span class="gp"> ---&gt;</span><span class="w"> </span>Using cache
<span class="gp"> ---&gt;</span><span class="w"> </span>d712516a5383
<span class="go">Step 5 : ADD Gemfile /myapp/Gemfile
</span><span class="gp"> ---&gt;</span><span class="w"> </span>Using cache
<span class="gp"> ---&gt;</span><span class="w"> </span>45897d961453
<span class="go">Step 6 : ADD Gemfile.lock /myapp/Gemfile.lock
</span><span class="gp"> ---&gt;</span><span class="w"> </span>Using cache
<span class="gp"> ---&gt;</span><span class="w"> </span>1e9aadcd1985
<span class="go">Step 7 : RUN bundle install
</span><span class="gp"> ---&gt;</span><span class="w"> </span>Running <span class="k">in </span>db6cade21717
<span class="go">Fetching gem metadata from https://rubygems.org/...........
Fetching version metadata from https://rubygems.org/...
Fetching dependency metadata from https://rubygems.org/..
Resolving dependencies...
Installing rake 11.1.2
...snip...
Removing intermediate container b18b021bc248
Step 8 : ADD . /myapp
</span><span class="gp"> ---&gt;</span><span class="w"> </span>e259ae327e06
<span class="go">Removing intermediate container 568e85cfeee6
Successfully built e259ae327e06
</span></code></pre></div></div>

<h2 id="データベース設定">
<a class="anchor" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E8%A8%AD%E5%AE%9A" aria-hidden="true"><span class="octicon octicon-link"></span></a>データベース設定</h2>

<p>デフォルトだとデータベースの向き先が<code class="highlighter-rouge">localhost</code>になっていますので、これを<code class="highlighter-rouge">db</code>コンテナに向けてやる必要があります。</p>

<p>下記の通り、<code class="highlighter-rouge">config/database.yml</code>内のhostに<code class="highlighter-rouge">db</code>を指定しましょう。</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># config/database.yml</span>
<span class="na">default</span><span class="pi">:</span> <span class="nl">&amp;default</span>
  <span class="na">adapter</span><span class="pi">:</span> <span class="s">mysql2</span>
  <span class="na">encoding</span><span class="pi">:</span> <span class="s">utf8</span>
  <span class="na">pool</span><span class="pi">:</span> <span class="m">5</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s">root</span>
  <span class="na">password</span><span class="pi">:</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">db</span>

<span class="na">development</span><span class="pi">:</span>
  <span class="s">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*default</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">myapp_development</span>
</code></pre></div></div>

<p>データベースの設定が完了したらデータベースを作成します。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker-compose run web rake db:create
</code></pre></div></div>

<h2 id="docker-compose-up">
<a class="anchor" href="#docker-compose-up" aria-hidden="true"><span class="octicon octicon-link"></span></a>docker-compose up</h2>

<p><code class="highlighter-rouge">docker-compose up</code>してrails serverを立ち上げます。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker-compose up
<span class="go">Recreating rails1_db_1
Recreating rails1_web_1
Attaching to rails1_db_1, rails1_web_1
db_1  | 2016-04-09T16:48:34.775827Z 0 [Note] mysqld (mysqld 5.7.11) starting as process 1 ...
...snip...
db_1  | Version: '5.7.11'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  MySQL Community Server (GPL)
web_1 | [2016-04-09 16:48:38] INFO  WEBrick 1.3.1
web_1 | [2016-04-09 16:48:38] INFO  ruby 2.3.0 (2015-12-25) [x86_64-linux]
</span><span class="gp">web_1 | [2016-04-09 16:48:38] INFO  WEBrick::HTTPServer#</span>start: <span class="nv">pid</span><span class="o">=</span>1 <span class="nv">port</span><span class="o">=</span>3000
</code></pre></div></div>

<p>これでrails serverが準備できました。<code class="highlighter-rouge">192.168.99.100:3000</code>でページが見ることができます。</p>

<p>ちなみにdocker-machineのIPアドレスは下記のように取得可能です。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker-machine ip default
<span class="go">192.168.99.100
</span></code></pre></div></div>

<p>これにて完了！</p>

<h2 id="参考">
<a class="anchor" href="#%E5%8F%82%E8%80%83" aria-hidden="true"><span class="octicon octicon-link"></span></a>参考</h2>

<ul>
  <li><a href="https://docs.docker.com/compose/rails/">Quickstart: Compose and Rails</a></li>
</ul>

</div>

<ul id="social-buttons">
  <li class="hatena"><a href="https://b.hatena.ne.jp/entry/s/blog.toshimaru.net/docker-compose-rails/" class="hatena-bookmark-button" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;"></a></li>
  <li class="twitter"><a href="https://twitter.com/share" class="twitter-share-button" data-via="toshimaru_e">Tweet</a></li>
  <li class="facebook"><div class="fb-like" data-layout="button_count" data-action="like" data-show-faces="false"></div></li>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  <script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>
</ul>


  <div class="related">
  <h3>関連記事</h3>
  <ul>
  
    <li><a href="/rails-on-docker-compose/" title="docker-compose で Rails6 + MySQL な環境を構築する">docker-compose で Rails6 + MySQL な環境を構築する</a></li>
  
    <li><a href="/rails-on-docker-system-spec/" title="Rails on Docker 環境での SystemSpec 環境構築">Rails on Docker 環境での SystemSpec 環境構築</a></li>
  
    <li><a href="/ruby-on-google-app-engine/" title="Ruby on Rails を Google App Engine 上で動かしてみる">Ruby on Rails を Google App Engine 上で動かしてみる</a></li>
  
  </ul>
  </div>


<div class="related-by-google">
  <h3>おすすめ記事</h3>
  <ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-8616720383995770" data-ad-slot="7568375448"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>

<div class="post-pagination clearfix">
  
  <div class="newer">
    <a href="/rails-new-options/" title="Newer Post: rails new するときによく使うオプション"><i class="icon-chevron-left"></i>  Newer</a>
  </div>
  

  
  <div class="older">
    <a href="/terraform/" title="Older Post: terraformでDigitalOceanに簡単ドロップレット作成">Older  <i class="icon-chevron-right"></i></a>
  </div>
  
</div>

<div id="disqus_thread"></div>
<script>
var disqus_config = function () {
this.page.url = "https://blog.toshimaru.net/docker-compose-rails/";
this.page.identifier = "/docker-compose-rails/";
};
(function () { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://hackyourdesign.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

<div id="adsense">
  <!-- responsive-ad-unit -->
  <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8616720383995770" data-ad-slot="4426937197" data-ad-format="auto" data-full-width-responsive="true">
  </ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>

<script id="jsonld" type="application/ld+json">
[
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": {
      "@type": "Blog",
      "@id": "https://blog.toshimaru.net/docker-compose-rails/"
    },
    "headline": "docker-compose で Rails 環境を構築する",
    "datePublished": "2016-04-09T00:00:00+09:00",
    "author": {
      "@type": "Person",
      "name": "Toshimaru",
      "email": "me@toshimaru.net"
    },
    "publisher": {
      "@type": "Person",
      "name": "Toshimaru",
      "email": "me@toshimaru.net"
    },
    "image": {
      "@type": "ImageObject",
      "url": "https://blog.toshimaru.net/images/posts/docker/compose.png"
    },
    "keywords": "docker"
  },
  {
    
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https://blog.toshimaru.net/tag/docker/",
          "name": "docker"
        }
      }
    ]
    }
]
</script>

      </div>
    </div>
  </div>
  <footer>
  <div class="main">
    <div class="wrapper clearfix">
      <div class="about">
        
          <h2>About</h2>
          <img id="profile_pic" src="/images/profile.jpg" alt="profile picture" height="110" width="110">
          <dl class="about-dl">
            <dt>Toshimaru</dt>
            <dd>Web Developer. カナダ・バンクーバーでの修行時代を経て日本帰国。最近はもっぱらRuby on Railsと奮闘する日々。ブログでは技術ネタをよく書いています。</dd>
          </dl>
          <ul class="externallinks">
            <li><a href="https://twitter.com/toshimaru_e" class="icon-twitter-sign" title="twitter"></a></li>
            <li><a href="https://github.com/toshimaru" class="icon-github-sign" title="github"></a></li>
          </ul>
        
      </div>
      <div class="center popular">
        <h2>Popular</h2>
        <ul>
          <li>
<a href="/cool-ui/">UIの進化を止めるうんこユーザーに我々はどう立ち向かうべきか</a><a href="https://b.hatena.ne.jp/entry/s/blog.toshimaru.net/cool-ui/"><img src="https://b.hatena.ne.jp/entry/image/https://blog.toshimaru.net/cool-ui/"></a>
</li>
          <li>
<a href="/rails-frontend/">Railsフロントエンド技術の今とこれから</a><a href="https://b.hatena.ne.jp/entry/s/blog.toshimaru.net/rails-frontend/"><img src="https://b.hatena.ne.jp/entry/image/https://blog.toshimaru.net/rails-frontend/"></a>
</li>
          <li>
<a href="/jquery-ajaxdeferredajax/">jQueryのDeferredを用いたモダンなAjax処理の書き方</a><a href="https://b.hatena.ne.jp/entry/s/blog.toshimaru.net/jquery-ajaxdeferredajax/"><img src="https://b.hatena.ne.jp/entry/image/https://blog.toshimaru.net/jquery-ajaxdeferredajax/"></a>
</li>
          <li>
<a href="/engineer-hiring/">『その「エンジニア採用」が不幸を生む』を読んだ ~優秀エンジニアをどう採用するか~</a><a href="https://b.hatena.ne.jp/entry/s/blog.toshimaru.net/engineer-hiring/"><img src="https://b.hatena.ne.jp/entry/image/https://blog.toshimaru.net/engineer-hiring/"></a>
</li>
          <li>
<a href="/rails-batch-optimization/">Rails/ActiveRecord バッチ処理の最適化</a><a href="https://b.hatena.ne.jp/entry/s/blog.toshimaru.net/rails-batch-optimization/"><img src="https://b.hatena.ne.jp/entry/image/https://blog.toshimaru.net/rails-batch-optimization/"></a>
</li>
          <li>
<a href="/rails-http-status-symbols/">RailsのHTTPステータスのシンボル表現まとめ</a><a href="https://b.hatena.ne.jp/entry/s/blog.toshimaru.net/rails-http-status-symbols/"><img src="https://b.hatena.ne.jp/entry/image/https://blog.toshimaru.net/rails-http-status-symbols/"></a>
</li>
          <li>
<a href="/vg-tech-assessment/">VOYAGE GROUPの『公開技術力評価会』に行ってエンジニア評価と給与設定について本気出して考えた</a><a href="https://b.hatena.ne.jp/entry/s/blog.toshimaru.net/vg-tech-assessment/"><img src="https://b.hatena.ne.jp/entry/image/https://blog.toshimaru.net/vg-tech-assessment/"></a>
</li>
        </ul>
        <p><a href="https://b.hatena.ne.jp/entrylist?sort=count&amp;url=blog.toshimaru.net">▶ その他の人気記事はこちら</a></p>
      </div>
      <div class="right">
        <h2>Tag</h2>
        <div class="tags">
        <a href="/tag/activerecord/" class="set-2">activerecord</a> <a href="/tag/ajax/" class="set-1">ajax</a> <a href="/tag/android/" class="set-1">android</a> <a href="/tag/apache/" class="set-1">apache</a> <a href="/tag/api/" class="set-1">api</a> <a href="/tag/aws/" class="set-1">aws</a> <a href="/tag/bash/" class="set-1">bash</a> <a href="/tag/chef/" class="set-1">chef</a> <a href="/tag/chrome/" class="set-1">chrome</a> <a href="/tag/ci/" class="set-1">ci</a> <a href="/tag/circleci/" class="set-1">circleci</a> <a href="/tag/composer/" class="set-1">composer</a> <a href="/tag/css/" class="set-1">css</a> <a href="/tag/design/" class="set-1">design</a> <a href="/tag/digitalocean/" class="set-1">digitalocean</a> <a href="/tag/docker/" class="set-1">docker</a> <a href="/tag/facebook/" class="set-1">facebook</a> <a href="/tag/frontend/" class="set-1">frontend</a> <a href="/tag/gem/" class="set-1">gem</a> <a href="/tag/git/" class="set-2">git</a> <a href="/tag/github/" class="set-1">github</a> <a href="/tag/go/" class="set-1">go</a> <a href="/tag/google-app-engine/" class="set-1">google-app-engine</a> <a href="/tag/html/" class="set-1">html</a> <a href="/tag/https/" class="set-1">https</a> <a href="/tag/hubot/" class="set-1">hubot</a> <a href="/tag/iphone/" class="set-1">iphone</a> <a href="/tag/isucon/" class="set-1">isucon</a> <a href="/tag/java/" class="set-1">java</a> <a href="/tag/javascript/" class="set-3">javascript</a> <a href="/tag/jekyll/" class="set-1">jekyll</a> <a href="/tag/jquery/" class="set-2">jquery</a> <a href="/tag/json/" class="set-1">json</a> <a href="/tag/jsonschema/" class="set-1">jsonschema</a> <a href="/tag/linux/" class="set-1">linux</a> <a href="/tag/mac/" class="set-2">mac</a> <a href="/tag/mail/" class="set-1">mail</a> <a href="/tag/management/" class="set-1">management</a> <a href="/tag/markdown/" class="set-1">markdown</a> <a href="/tag/mysql/" class="set-1">mysql</a> <a href="/tag/network/" class="set-1">network</a> <a href="/tag/npm/" class="set-1">npm</a> <a href="/tag/opsworks/" class="set-1">opsworks</a> <a href="/tag/oss/" class="set-2">oss</a> <a href="/tag/packer/" class="set-1">packer</a> <a href="/tag/perl/" class="set-1">perl</a> <a href="/tag/php/" class="set-3">php</a> <a href="/tag/pixel/" class="set-1">pixel</a> <a href="/tag/podcast/" class="set-1">podcast</a> <a href="/tag/poem/" class="set-1">poem</a> <a href="/tag/presentation/" class="set-2">presentation</a> <a href="/tag/programming/" class="set-1">programming</a> <a href="/tag/python/" class="set-1">python</a> <a href="/tag/rails/" class="set-5">rails</a> <a href="/tag/rake/" class="set-1">rake</a> <a href="/tag/review/" class="set-1">review</a> <a href="/tag/rfc/" class="set-1">rfc</a> <a href="/tag/roppongirb/" class="set-1">roppongirb</a> <a href="/tag/rspec/" class="set-1">rspec</a> <a href="/tag/rubocop/" class="set-1">rubocop</a> <a href="/tag/ruby/" class="set-4">ruby</a> <a href="/tag/s3/" class="set-1">s3</a> <a href="/tag/scala/" class="set-1">scala</a> <a href="/tag/scrum/" class="set-1">scrum</a> <a href="/tag/security/" class="set-1">security</a> <a href="/tag/seo/" class="set-1">seo</a> <a href="/tag/shell/" class="set-1">shell</a> <a href="/tag/sublimetext/" class="set-1">sublimetext</a> <a href="/tag/svn/" class="set-1">svn</a> <a href="/tag/tech/" class="set-3">tech</a> <a href="/tag/terraform/" class="set-1">terraform</a> <a href="/tag/vagrant/" class="set-1">vagrant</a> <a href="/tag/vancouver/" class="set-1">vancouver</a> <a href="/tag/video/" class="set-1">video</a> <a href="/tag/vim/" class="set-1">vim</a> <a href="/tag/vscode/" class="set-1">vscode</a> <a href="/tag/web/" class="set-1">web</a> <a href="/tag/windows/" class="set-1">windows</a> <a href="/tag/zsh/" class="set-1">zsh</a> <a href="/tag/%E5%B0%B1%E6%B4%BB/" class="set-2">就活</a> <a href="/tag/%E6%8E%A1%E7%94%A8/" class="set-1">採用</a> <a href="/tag/%E6%B5%B7%E5%A4%96%E5%B0%B1%E5%8A%B4/" class="set-1">海外就労</a> <a href="/tag/%E7%BF%BB%E8%A8%B3/" class="set-1">翻訳</a> <a href="/tag/%E8%AA%AD%E6%9B%B8/" class="set-1">読書</a> <a href="/tag/%E8%BB%A2%E8%81%B7/" class="set-1">転職</a> <a href="/tag/%E9%9B%91%E8%A8%98/" class="set-1">雑記</a>

        </div>
      </div>
    </div>
    <p class="credit">Designed and coded by <a href="/about.html">Toshimaru</a>. Powered by <a href="http://jekyllrb.com/">Jekyll</a>, Hosted by <a href="https://github.com/toshimaru/blog.toshimaru.net">Github</a>.</p>
  </div>
</footer>


  <script src="/js/vendor/modernizr-3.8.0.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"></script>
  <script src="/js/main.js"></script>
</body>
</html>
