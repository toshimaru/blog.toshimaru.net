---
layout: post
title: Rubyの %（パーセント） を使った記法まとめ
description: |
  Rubyで使われる%（パーセント）を使った記法を、よく忘れるのでメモがてらまとめてみます。%, %Q	"" (ダブルクオート) %q	'' (シングルクオート) %w	[] (文字列配列) %W	[] (文字列配列・式展開あり) %i	[] (シンボル配列) %I	[] (シンボル配列・式展開あり) %x	`` (コマンド実行) %s	: (シンボル) %r	// (正規表現)
tags: ruby
toc: true
last_modified_at: 2022-03-21
image: /images/posts/ruby-notation.png
---

Rubyで使われる`%`（パーセント）を使った記法を、よく忘れるのでメモがてらまとめてみます。

## まとめ

| %記法 | `%`を使わない場合の書き方 |
| ---       | --- |
| `%`, `%Q` | `""` (ダブルクオート) |
| `%q`      | `''` (シングルクオート) |
| `%w`      | `[]` (文字列配列)|
| `%W`      | `[]` (文字列配列・式展開あり) |
| `%i`      | `[]` (シンボル配列) |
| `%I`      | `[]` (シンボル配列・式展開あり) |
| `%x`      | <code>``</code> (コマンド実行) |
| `%s`      | `:` (シンボル) |
| `%r`      | `//` (正規表現) |

{% include info.html title="" text="%の後には角括弧（`[]`）丸括弧（`()`）や波括弧（`{}`）などの記号が使えます" %}

## 文字列表現系

### `%`, `%Q`

`%`, `%Q` は、記法内で式展開することが可能な文字列を表現します。

`%` で書いても `%Q` で書いても同じ意味になります。

```rb
%(a b c)
# => "a b c"

a, b, c = 1, 2, 3
%(#{a} #{b} #{c})
# => "1 2 3" # 式展開される
%Q(#{a} #{b} #{c})
# => "1 2 3" 
```

### `%q`

`%q` は、式展開ができない文字列を表現します。

```rb
%q(a b c)
# => "a b c"

a, b, c = 1, 2, 3
%q(#{a} #{b} #{c})
# => "\#{a} \#{b} \#{c}" # 式展開されていない
```

## 配列表現系

### `%w`

`%w` では、記法内でスペースで区切ったそれぞれの文字列を含む配列となります。

```rb
%w(a b c)
# => ["a", "b", "c"]
```

### `%W`

大文字の`%W`は、記法内で式展開が可能となります。

```rb
a, b, c = 1, 2, 3
%W(#{a} #{b} #{c})
# => ["1", "2", "3"]
```

### `%i`

`%i`は、シンボルの配列となります。

```rb
%i(a b c)
# => [:a, :b, :c]
```

### `%I`

`%I`は、式展開可能なシンボル配列です。

```rb
a, b, c = 1, 2, 3
%I(#{a} #{b} #{c})
#=> [:"1", :"2", :"3"]
```

## コマンド実行

### `%x`

`%x` では、シェルコマンドを実行できます。

バッククオートと括った表現と同じ意味になります。

```rb
%x(date)
# => "Mon Mar 21 18:25:04 JST 2022\n"
`date`
# => "Mon Mar 21 18:25:27 JST 2022\n"
```

## シンボル

### `%s`

`%s`は、記法内の文字列を一つのシンボルとして解釈させることができます。

```rb
%s(a b c)
# => :"a b c"
```

## 正規表現

### `%r`

`%r` は、正規表現を表します。

URLの正規表現を作るときなど、`%r`記法を使ったほうがラクで良いです。

```rb
%r(^http://)
# => /^http:\/\//
```

## 参考

* [Rubyで%記法（パーセント記法）を使う](http://qiita.com/mogulla3/items/46bb876391be07921743)
